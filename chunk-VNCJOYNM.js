import{F as C,G as D,O as S,R as N,c as I,n as O,v as y,w as P}from"./chunk-36JE2O54.js";var M="type.googleapis.com/google.protobuf.Int64Value",G="type.googleapis.com/google.protobuf.UInt64Value";function U(e,t){let n={};for(let r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function E(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>E(t));if(typeof e=="function"||typeof e=="object")return U(e,t=>E(t));throw new Error("Data cannot be encoded in JSON: "+e)}function g(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case M:case G:{let t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>g(t)):typeof e=="function"||typeof e=="object"?U(e,t=>g(t)):e}var b="functions";var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=class e extends O{constructor(t,n,r){super(`${b}/${t}`,n||""),this.details=r,Object.setPrototypeOf(this,e.prototype)}};function H(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function T(e,t){let n=H(e),r=n,o;try{let a=t&&t.error;if(a){let s=a.status;if(typeof s=="string"){if(!R[s])return new d("internal","internal");n=R[s],r=s}let i=a.message;typeof i=="string"&&(r=i),o=a.details,o!==void 0&&(o=g(o))}}catch{}return n==="ok"?null:new d(n,r,o)}var A=class{constructor(t,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{let t=await this.auth.getToken();return t?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.appCheck){let n=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(t){let n=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(t);return{authToken:n,messagingToken:r,appCheckToken:o}}};var k="us-central1",J=/^data: (.*?)(?:\n|$)/;function j(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new d("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}var v=class{constructor(t,n,r,o,a=k,s=(...i)=>fetch(...i)){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new A(n,r,o),this.cancelAllRequests=new Promise(i=>{this.deleteService=()=>Promise.resolve(i())});try{let i=new URL(a);this.customDomain=i.origin+(i.pathname==="/"?"":i.pathname),this.region=k}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(t){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}};function q(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}function V(e,t,n){let r=o=>Y(e,t,o,n||{});return r.stream=(o,a)=>K(e,t,o,a),r}function B(e,t,n){let r=o=>F(e,t,o,n||{});return r.stream=(o,a)=>$(e,t,o,a||{}),r}async function X(e,t,n,r){n["Content-Type"]="application/json";let o;try{o=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await o.json()}catch{}return{status:o.status,json:a}}async function x(e,t){let n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Y(e,t,n,r){let o=e._url(t);return F(e,o,n,r)}async function F(e,t,n,r){n=E(n);let o={data:n},a=await x(e,r),s=r.timeout||7e4,i=j(s),l=await Promise.race([X(t,o,a,e.fetchImpl),i.promise,e.cancelAllRequests]);if(i.cancel(),!l)throw new d("cancelled","Firebase Functions instance was deleted.");let u=T(l.status,l.json);if(u)throw u;if(!l.json)throw new d("internal","Response is not valid JSON object.");let c=l.json.data;if(typeof c>"u"&&(c=l.json.result),typeof c>"u")throw new d("internal","Response is missing data field.");return{data:g(c)}}function K(e,t,n,r){let o=e._url(t);return $(e,o,n,r||{})}async function $(e,t,n,r){var o;n=E(n);let a={data:n},s=await x(e,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:r?.signal})}catch(f){if(f instanceof Error&&f.name==="AbortError"){let w=new d("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let h=T(0,null);return{data:Promise.reject(h),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(h)}}}}}}let l,u,c=new Promise((f,h)=>{l=f,u=h});(o=r?.signal)===null||o===void 0||o.addEventListener("abort",()=>{let f=new d("cancelled","Request was cancelled.");u(f)});let m=i.body.getReader(),p=z(m,l,u,r?.signal);return{stream:{[Symbol.asyncIterator](){let f=p.getReader();return{async next(){let{value:h,done:w}=await f.read();return{value:h,done:w}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:c}}function z(e,t,n,r){let o=(s,i)=>{let l=s.match(J);if(!l)return;let u=l[1];try{let c=JSON.parse(u);if("result"in c){t(g(c.result));return}if("message"in c){i.enqueue(g(c.message));return}if("error"in c){let m=T(0,c);i.error(m),n(m);return}}catch(c){if(c instanceof d){i.error(c),n(c);return}}},a=new TextDecoder;return new ReadableStream({start(s){let i="";return l();async function l(){if(r?.aborted){let u=new d("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{let{value:u,done:c}=await e.read();if(c){i.trim()&&o(i.trim(),s),s.close();return}if(r?.aborted){let p=new d("cancelled","Request was cancelled");s.error(p),n(p),await e.cancel();return}i+=a.decode(u,{stream:!0});let m=i.split(`
`);i=m.pop()||"";for(let p of m)p.trim()&&o(p.trim(),s);return l()}catch(u){let c=u instanceof d?u:T(0,null);s.error(c),n(c)}}},cancel(){return e.cancel()}})}var _="@firebase/functions",L="0.12.0";var W="auth-internal",Q="app-check-internal",Z="messaging-internal";function ee(e){let t=(n,{instanceIdentifier:r})=>{let o=n.getProvider("app").getImmediate(),a=n.getProvider(W),s=n.getProvider(Z),i=n.getProvider(Q);return new v(o,a,s,i,r)};C(new P(b,t,"PUBLIC").setMultipleInstances(!0)),N(_,L,e),N(_,L,"esm2017")}function ie(e=S(),t=k){let r=D(y(e),b).getImmediate({identifier:t}),o=I("functions");return o&&te(r,...o),r}function te(e,t,n){q(y(e),t,n)}function se(e,t,n){return V(y(e),t,n)}function ae(e,t,n){return B(y(e),t,n)}ee();export{d as a,ie as b,te as c,se as d,ae as e};
