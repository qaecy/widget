import{c as qe}from"./chunk-X2FZSAPJ.js";import{d as We,l as Z}from"./chunk-7DTGGGFL.js";import{B as pe,Fa as $e,K as je,La as P,O as S,Pa as _e,Q as q,R as m,S as Pe,X as ue,Y as De,Ya as Me,Zb as Ve,_a as ze,b as le,ca as ee,db as Fe,f as ce,fa as te,hc as Le,i as J,ic as F,ka as ne,l as Re,m as Oe,n as Ae,pa as he,v as Ne,zb as He}from"./chunk-I7ZHWVYA.js";import{a as w,b as z}from"./chunk-DAQOROHW.js";var de=class{direction="up";isTop=!1;isBottom=!1},vn=(()=>{class c{_el=Pe(ne);_lastScrollTop=0;scrollEvent=new te;onScroll(){let e=this._el.nativeElement;if(e.scrollHeight>e.clientHeight){let t=e.scrollTop,n=new de;t>this._lastScrollTop?n.direction="down":t<this._lastScrollTop&&(n.direction="up"),n.isTop=t===0,n.isBottom=Math.ceil(t+e.clientHeight)>=e.scrollHeight,this.scrollEvent.emit(n),this._lastScrollTop=t}}static \u0275fac=function(t){return new(t||c)};static \u0275dir=ze({type:c,selectors:[["","libScrollListener",""]],hostBindings:function(t,n){t&1&&He("scroll",function(o){return n.onScroll(o)})},outputs:{scrollEvent:"scrollEvent"}})}return c})();function me(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var $=me();function Ge(c){$=c}var Ye=/[&<>"']/,ut=new RegExp(Ye.source,"g"),Je=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ht=new RegExp(Je.source,"g"),dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ze=c=>dt[c];function C(c,r){if(r){if(Ye.test(c))return c.replace(ut,Ze)}else if(Je.test(c))return c.replace(ht,Ze);return c}var ft=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function gt(c){return c.replace(ft,(r,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}var mt=/(^|[^\[])\^/g;function y(c,r){let e=typeof c=="string"?c:c.source;r=r||"";let t={replace:(n,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(mt,"$1"),e=e.replace(n,o),t},getRegex:()=>new RegExp(e,r)};return t}function Qe(c){try{c=encodeURI(c).replace(/%25/g,"%")}catch{return null}return c}var U={exec:()=>null};function Ue(c,r){let e=c.replace(/\|/g,(i,o,s)=>{let a=!1,l=o;for(;--l>=0&&s[l]==="\\";)a=!a;return a?"|":" |"}),t=e.split(/ \|/),n=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),r)if(t.length>r)t.splice(r);else for(;t.length<r;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function ie(c,r,e){let t=c.length;if(t===0)return"";let n=0;for(;n<t;){let i=c.charAt(t-n-1);if(i===r&&!e)n++;else if(i!==r&&e)n++;else break}return c.slice(0,t-n)}function bt(c,r){if(c.indexOf(r[1])===-1)return-1;let e=0;for(let t=0;t<c.length;t++)if(c[t]==="\\")t++;else if(c[t]===r[0])e++;else if(c[t]===r[1]&&(e--,e<0))return t;return-1}function Ke(c,r,e,t){let n=r.href,i=r.title?C(r.title):null,o=c[1].replace(/\\([\[\]])/g,"$1");if(c[0].charAt(0)!=="!"){t.state.inLink=!0;let s={type:"link",raw:e,href:n,title:i,text:o,tokens:t.inlineTokens(o)};return t.state.inLink=!1,s}return{type:"image",raw:e,href:n,title:i,text:C(o)}}function kt(c,r){let e=c.match(/^(\s+)(?:```)/);if(e===null)return r;let t=e[1];return r.split(`
`).map(n=>{let i=n.match(/^\s+/);if(i===null)return n;let[o]=i;return o.length>=t.length?n.slice(t.length):n}).join(`
`)}var V=class{options;rules;lexer;constructor(r){this.options=r||$}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:ie(t,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let t=e[0],n=kt(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(/#$/.test(t)){let n=ie(t,"#");(this.options.pedantic||!n||/ $/.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:e[0]}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let t=ie(e[0].replace(/^ *>[ \t]?/gm,""),`
`),n=this.lexer.state.top;this.lexer.state.top=!0;let i=this.lexer.blockTokens(t);return this.lexer.state.top=n,{type:"blockquote",raw:e[0],tokens:i,text:t}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim(),n=t.length>1,i={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");let o=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),s="",a="",l=!1;for(;r;){let p=!1;if(!(e=o.exec(r))||this.rules.block.hr.test(r))break;s=e[0],r=r.substring(s.length);let d=e[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),u=r.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,a=d.trimStart()):(h=e[2].search(/[^ ]/),h=h>4?1:h,a=d.slice(h),h+=e[1].length);let f=!1;if(!d&&/^ *$/.test(u)&&(s+=u+`
`,r=r.substring(u.length+1),p=!0),!p){let x=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),B=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),W=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),M=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;r;){let R=r.split(`
`,1)[0];if(u=R,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),W.test(u)||M.test(u)||x.test(u)||B.test(r))break;if(u.search(/[^ ]/)>=h||!u.trim())a+=`
`+u.slice(h);else{if(f||d.search(/[^ ]/)>=4||W.test(d)||M.test(d)||B.test(d))break;a+=`
`+u}!f&&!u.trim()&&(f=!0),s+=R+`
`,r=r.substring(R.length+1),d=u.slice(h)}}i.loose||(l?i.loose=!0:/\n *\n *$/.test(s)&&(l=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(a),g&&(v=g[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:s,task:!!g,checked:v,loose:!1,text:a,tokens:[]}),i.raw+=s}i.items[i.items.length-1].raw=s.trimEnd(),i.items[i.items.length-1].text=a.trimEnd(),i.raw=i.raw.trimEnd();for(let p=0;p<i.items.length;p++)if(this.lexer.state.top=!1,i.items[p].tokens=this.lexer.blockTokens(i.items[p].text,[]),!i.loose){let d=i.items[p].tokens.filter(h=>h.type==="space"),u=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));i.loose=u}if(i.loose)for(let p=0;p<i.items.length;p++)i.items[p].loose=!0;return i}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let t=e[1].toLowerCase().replace(/\s+/g," "),n=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:i}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!/[:|]/.test(e[2]))return;let t=Ue(e[1]),n=e[2].replace(/^\||\| *$/g,"").split("|"),i=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let s of n)/^ *-+: *$/.test(s)?o.align.push("right"):/^ *:-+: *$/.test(s)?o.align.push("center"):/^ *:-+ *$/.test(s)?o.align.push("left"):o.align.push(null);for(let s of t)o.header.push({text:s,tokens:this.lexer.inline(s)});for(let s of i)o.rows.push(Ue(s,o.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return o}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:C(e[1])}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;let o=ie(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{let o=bt(e[2],"()");if(o>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],i="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);o&&(n=o[1],i=o[3])}else i=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(t)?n=n.slice(1):n=n.slice(1,-1)),Ke(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){let n=(t[2]||t[1]).replace(/\s+/g," "),i=e[n.toLowerCase()];if(!i){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return Ke(t,i,t[0],this.lexer)}}emStrong(r,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(r);if(!n||n[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let o=[...n[0]].length-1,s,a,l=o,p=0,d=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*r.length+o);(n=d.exec(e))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(a=[...s].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&o%3&&!((o+a)%3)){p+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+p);let u=[...n[0]][0].length,h=r.slice(0,o+n.index+u+a);if(Math.min(o,a)%2){let g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(/\n/g," "),n=/[^ ]/.test(t),i=/^ /.test(t)&&/ $/.test(t);return n&&i&&(t=t.substring(1,t.length-1)),t=C(t,!0),{type:"codespan",raw:e[0],text:t}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let t,n;return e[2]==="@"?(t=C(e[1]),n="mailto:"+t):(t=C(e[1]),n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let t,n;if(e[2]==="@")t=C(e[0]),n="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);t=C(e[0]),e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let t;return this.lexer.state.inRawBlock?t=e[0]:t=C(e[0]),{type:"text",raw:e[0],text:t}}}},yt=/^(?: *(?:\n|$))+/,vt=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,xt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,X=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,et=/(?:[*+-]|\d{1,9}[.)])/,tt=y(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,et).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),be=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,St=/^[^\n]+/,ke=/(?!\s*\])(?:\\.|[^\[\]\\])+/,It=y(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ke).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Tt=y(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,et).getRegex(),se="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ye=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Et=y("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ye).replace("tag",se).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),nt=y(be).replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex(),Ct=y(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",nt).getRegex(),ve={blockquote:Ct,code:vt,def:It,fences:xt,heading:wt,hr:X,html:Et,lheading:tt,list:Tt,newline:yt,paragraph:nt,table:U,text:St},Xe=y("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex(),Bt=z(w({},ve),{table:Xe,paragraph:y(be).replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Xe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex()}),Rt=z(w({},ve),{html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ye).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:U,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:y(be).replace("hr",X).replace("heading",` *#{1,6} *[^
]`).replace("lheading",tt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),it=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ot=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ot=/^( {2,}|\\)\n(?!\s*$)/,At=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,G="\\p{P}\\p{S}",Nt=y(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,G).getRegex(),jt=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Pt=y(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,G).getRegex(),Dt=y("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,G).getRegex(),$t=y("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,G).getRegex(),_t=y(/\\([punct])/,"gu").replace(/punct/g,G).getRegex(),Mt=y(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zt=y(ye).replace("(?:-->|$)","-->").getRegex(),Ft=y("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),re=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ht=y(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",re).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),rt=y(/^!?\[(label)\]\[(ref)\]/).replace("label",re).replace("ref",ke).getRegex(),st=y(/^!?\[(ref)\](?:\[\])?/).replace("ref",ke).getRegex(),Vt=y("reflink|nolink(?!\\()","g").replace("reflink",rt).replace("nolink",st).getRegex(),xe={_backpedal:U,anyPunctuation:_t,autolink:Mt,blockSkip:jt,br:ot,code:Ot,del:U,emStrongLDelim:Pt,emStrongRDelimAst:Dt,emStrongRDelimUnd:$t,escape:it,link:Ht,nolink:st,punctuation:Nt,reflink:rt,reflinkSearch:Vt,tag:Ft,text:At,url:U},Lt=z(w({},xe),{link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",re).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",re).getRegex()}),fe=z(w({},xe),{escape:y(it).replace("])","~|])").getRegex(),url:y(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Wt=z(w({},fe),{br:y(ot).replace("{2,}","*").getRegex(),text:y(fe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),oe={normal:ve,gfm:Bt,pedantic:Rt},Q={normal:xe,gfm:fe,breaks:Wt,pedantic:Lt},O=class c{tokens;options;state;tokenizer;inlineQueue;constructor(r){this.tokens=[],this.tokens.links=Object.create(null),this.options=r||$,this.options.tokenizer=this.options.tokenizer||new V,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={block:oe.normal,inline:Q.normal};this.options.pedantic?(e.block=oe.pedantic,e.inline=Q.pedantic):this.options.gfm&&(e.block=oe.gfm,this.options.breaks?e.inline=Q.breaks:e.inline=Q.gfm),this.tokenizer.rules=e}static get rules(){return{block:oe,inline:Q}}static lex(r,e){return new c(e).lex(r)}static lexInline(r,e){return new c(e).inlineTokens(r)}lex(r){r=r.replace(/\r\n|\r/g,`
`),this.blockTokens(r,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(r,e=[]){this.options.pedantic?r=r.replace(/\t/g,"    ").replace(/^ +$/gm,""):r=r.replace(/^( *)(\t+)/gm,(s,a,l)=>a+"    ".repeat(l.length));let t,n,i,o;for(;r;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(t=s.call({lexer:this},r,e))?(r=r.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.space(r)){r=r.substring(t.raw.length),t.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(t);continue}if(t=this.tokenizer.code(r)){r=r.substring(t.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+t.raw,n.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(t);continue}if(t=this.tokenizer.fences(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.heading(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.hr(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.blockquote(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.list(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.html(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.def(r)){r=r.substring(t.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+t.raw,n.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.lheading(r)){r=r.substring(t.raw.length),e.push(t);continue}if(i=r,this.options.extensions&&this.options.extensions.startBlock){let s=1/0,a=r.slice(1),l;this.options.extensions.startBlock.forEach(p=>{l=p.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(i=r.substring(0,s+1))}if(this.state.top&&(t=this.tokenizer.paragraph(i))){n=e[e.length-1],o&&n.type==="paragraph"?(n.raw+=`
`+t.raw,n.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(t),o=i.length!==r.length,r=r.substring(t.raw.length);continue}if(t=this.tokenizer.text(r)){r=r.substring(t.raw.length),n=e[e.length-1],n&&n.type==="text"?(n.raw+=`
`+t.raw,n.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(t);continue}if(r){let s="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,e}inline(r,e=[]){return this.inlineQueue.push({src:r,tokens:e}),e}inlineTokens(r,e=[]){let t,n,i,o=r,s,a,l;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)p.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,s.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;r;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(t=p.call({lexer:this},r,e))?(r=r.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.escape(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.tag(r)){r=r.substring(t.raw.length),n=e[e.length-1],n&&t.type==="text"&&n.type==="text"?(n.raw+=t.raw,n.text+=t.text):e.push(t);continue}if(t=this.tokenizer.link(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.reflink(r,this.tokens.links)){r=r.substring(t.raw.length),n=e[e.length-1],n&&t.type==="text"&&n.type==="text"?(n.raw+=t.raw,n.text+=t.text):e.push(t);continue}if(t=this.tokenizer.emStrong(r,o,l)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.codespan(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.br(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.del(r)){r=r.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.autolink(r)){r=r.substring(t.raw.length),e.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(r))){r=r.substring(t.raw.length),e.push(t);continue}if(i=r,this.options.extensions&&this.options.extensions.startInline){let p=1/0,d=r.slice(1),u;this.options.extensions.startInline.forEach(h=>{u=h.call({lexer:this},d),typeof u=="number"&&u>=0&&(p=Math.min(p,u))}),p<1/0&&p>=0&&(i=r.substring(0,p+1))}if(t=this.tokenizer.inlineText(i)){r=r.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(l=t.raw.slice(-1)),a=!0,n=e[e.length-1],n&&n.type==="text"?(n.raw+=t.raw,n.text+=t.text):e.push(t);continue}if(r){let p="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return e}},L=class{options;constructor(r){this.options=r||$}code(r,e,t){let n=(e||"").match(/^\S*/)?.[0];return r=r.replace(/\n$/,"")+`
`,n?'<pre><code class="language-'+C(n)+'">'+(t?r:C(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:C(r,!0))+`</code></pre>
`}blockquote(r){return`<blockquote>
${r}</blockquote>
`}html(r,e){return r}heading(r,e,t){return`<h${e}>${r}</h${e}>
`}hr(){return`<hr>
`}list(r,e,t){let n=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+n+i+`>
`+r+"</"+n+`>
`}listitem(r,e,t){return`<li>${r}</li>
`}checkbox(r){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(r){return`<p>${r}</p>
`}table(r,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+e+`</table>
`}tablerow(r){return`<tr>
${r}</tr>
`}tablecell(r,e){let t=e.header?"th":"td";return(e.align?`<${t} align="${e.align}">`:`<${t}>`)+r+`</${t}>
`}strong(r){return`<strong>${r}</strong>`}em(r){return`<em>${r}</em>`}codespan(r){return`<code>${r}</code>`}br(){return"<br>"}del(r){return`<del>${r}</del>`}link(r,e,t){let n=Qe(r);if(n===null)return t;r=n;let i='<a href="'+r+'"';return e&&(i+=' title="'+e+'"'),i+=">"+t+"</a>",i}image(r,e,t){let n=Qe(r);if(n===null)return t;r=n;let i=`<img src="${r}" alt="${t}"`;return e&&(i+=` title="${e}"`),i+=">",i}text(r){return r}},K=class{strong(r){return r}em(r){return r}codespan(r){return r}del(r){return r}html(r){return r}text(r){return r}link(r,e,t){return""+t}image(r,e,t){return""+t}br(){return""}},A=class c{options;renderer;textRenderer;constructor(r){this.options=r||$,this.options.renderer=this.options.renderer||new L,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new K}static parse(r,e){return new c(e).parse(r)}static parseInline(r,e){return new c(e).parseInline(r)}parse(r,e=!0){let t="";for(let n=0;n<r.length;n++){let i=r[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let o=i,s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){t+=s||"";continue}}switch(i.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{let o=i;t+=this.renderer.heading(this.parseInline(o.tokens),o.depth,gt(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=i;t+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=i,s="",a="";for(let p=0;p<o.header.length;p++)a+=this.renderer.tablecell(this.parseInline(o.header[p].tokens),{header:!0,align:o.align[p]});s+=this.renderer.tablerow(a);let l="";for(let p=0;p<o.rows.length;p++){let d=o.rows[p];a="";for(let u=0;u<d.length;u++)a+=this.renderer.tablecell(this.parseInline(d[u].tokens),{header:!1,align:o.align[u]});l+=this.renderer.tablerow(a)}t+=this.renderer.table(s,l);continue}case"blockquote":{let o=i,s=this.parse(o.tokens);t+=this.renderer.blockquote(s);continue}case"list":{let o=i,s=o.ordered,a=o.start,l=o.loose,p="";for(let d=0;d<o.items.length;d++){let u=o.items[d],h=u.checked,f=u.task,g="";if(u.task){let v=this.renderer.checkbox(!!h);l?u.tokens.length>0&&u.tokens[0].type==="paragraph"?(u.tokens[0].text=v+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&u.tokens[0].tokens[0].type==="text"&&(u.tokens[0].tokens[0].text=v+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:v+" "}):g+=v+" "}g+=this.parse(u.tokens,l),p+=this.renderer.listitem(g,f,!!h)}t+=this.renderer.list(p,s,a);continue}case"html":{let o=i;t+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=i;t+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,s=o.tokens?this.parseInline(o.tokens):o.text;for(;n+1<r.length&&r[n+1].type==="text";)o=r[++n],s+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);t+=e?this.renderer.paragraph(s):s;continue}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(r,e){e=e||this.renderer;let t="";for(let n=0;n<r.length;n++){let i=r[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){t+=o||"";continue}}switch(i.type){case"escape":{let o=i;t+=e.text(o.text);break}case"html":{let o=i;t+=e.html(o.text);break}case"link":{let o=i;t+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break}case"image":{let o=i;t+=e.image(o.href,o.title,o.text);break}case"strong":{let o=i;t+=e.strong(this.parseInline(o.tokens,e));break}case"em":{let o=i;t+=e.em(this.parseInline(o.tokens,e));break}case"codespan":{let o=i;t+=e.codespan(o.text);break}case"br":{t+=e.br();break}case"del":{let o=i;t+=e.del(this.parseInline(o.tokens,e));break}case"text":{let o=i;t+=e.text(o.text);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}},H=class{options;constructor(r){this.options=r||$}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}},ge=class{defaults=me();options=this.setOptions;parse=this.#e(O.lex,A.parse);parseInline=this.#e(O.lexInline,A.parseInline);Parser=A;Renderer=L;TextRenderer=K;Lexer=O;Tokenizer=V;Hooks=H;constructor(...r){this.use(...r)}walkTokens(r,e){let t=[];for(let n of r)switch(t=t.concat(e.call(this,n)),n.type){case"table":{let i=n;for(let o of i.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of i.rows)for(let s of o)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{let i=n;t=t.concat(this.walkTokens(i.items,e));break}default:{let i=n;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let s=i[o].flat(1/0);t=t.concat(this.walkTokens(s,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{let n=w({},t);if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=e.renderers[i.name];o?e.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[i.level];o?o.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),t.renderer){let i=this.defaults.renderer||new L(this.defaults);for(let o in t.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let s=o,a=t.renderer[s],l=i[s];i[s]=(...p)=>{let d=a.apply(i,p);return d===!1&&(d=l.apply(i,p)),d||""}}n.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new V(this.defaults);for(let o in t.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=t.tokenizer[s],l=i[s];i[s]=(...p)=>{let d=a.apply(i,p);return d===!1&&(d=l.apply(i,p)),d}}n.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new H;for(let o in t.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let s=o,a=t.hooks[s],l=i[s];H.passThroughHooks.has(o)?i[s]=p=>{if(this.defaults.async)return Promise.resolve(a.call(i,p)).then(u=>l.call(i,u));let d=a.call(i,p);return l.call(i,d)}:i[s]=(...p)=>{let d=a.apply(i,p);return d===!1&&(d=l.apply(i,p)),d}}n.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults=w(w({},this.defaults),n)}),this}setOptions(r){return this.defaults=w(w({},this.defaults),r),this}lexer(r,e){return O.lex(r,e??this.defaults)}parser(r,e){return A.parse(r,e??this.defaults)}#e(r,e){return(t,n)=>{let i=w({},n),o=w(w({},this.defaults),i);this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let s=this.#t(!!o.silent,!!o.async);if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(a=>r(a,o)).then(a=>o.hooks?o.hooks.processAllTokens(a):a).then(a=>o.walkTokens?Promise.all(this.walkTokens(a,o.walkTokens)).then(()=>a):a).then(a=>e(a,o)).then(a=>o.hooks?o.hooks.postprocess(a):a).catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let a=r(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let l=e(a,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(a){return s(a)}}}#t(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let n="<p>An error occurred:</p><pre>"+C(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},D=new ge;function k(c,r){return D.parse(c,r)}k.options=k.setOptions=function(c){return D.setOptions(c),k.defaults=D.defaults,Ge(k.defaults),k};k.getDefaults=me;k.defaults=$;k.use=function(...c){return D.use(...c),k.defaults=D.defaults,Ge(k.defaults),k};k.walkTokens=function(c,r){return D.walkTokens(c,r)};k.parseInline=D.parseInline;k.Parser=A;k.parser=A.parse;k.Renderer=L;k.TextRenderer=K;k.Lexer=O;k.lexer=O.lex;k.Tokenizer=V;k.Hooks=H;k.parse=k;var wn=k.options,Sn=k.setOptions,In=k.use,Tn=k.walkTokens,En=k.parseInline;var Cn=A.parse,Bn=O.lex;var qt=new q("All of the settings registered in the whole app."),Zt=new q("The settings collected from all ancestor injectors"),Qt=new q("The settings for the currently loaded module."),ae="__ngx_dynamic_hooks_content",we="dynamic-component-anchor",I="__ngx_dynamic_hooks_anchor_id",E="__ngx_dynamic_hooks_anchor_parsetoken",Ut=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Se=function(c){return c[c.All=0]="All",c[c.Linear=1]="Linear",c[c.None=2]="None",c}(Se||{}),j=()=>({sanitize:!0,convertHTMLEntities:!0,fixParagraphTags:!0,updateOnPushOnly:!1,compareInputsByValue:!1,compareOutputsByValue:!1,compareByValueDepth:5,triggerDOMEvents:!1,ignoreInputAliases:!1,ignoreOutputAliases:!1,acceptInputsForAnyProperty:!1,acceptOutputsForAnyObservable:!1,logOptions:{dev:!0,prod:!1,ssr:!1}}),b={},lt="[a-zA-Z_$]+[a-zA-Z0-9_$]*",Ce="[a-zA-Z$\\-_:][a-zA-Z$\\-_:0-9\\.]*";b.attributeNameNoBracketsRegex="("+Ce+")";b.attributeNameBracketsRegex="\\[("+Ce+")\\]";b.attributeNameRoundBracketsRegex="\\(("+Ce+")\\)";b.attributeNameRegex="(?:"+b.attributeNameNoBracketsRegex+"|"+b.attributeNameBracketsRegex+"|"+b.attributeNameRoundBracketsRegex+")";b.attributeValueDoubleQuotesRegex='"((?:\\\\.|[^"])*?)"';b.attributeValueSingleQuotesRegex="'((?:\\\\.|[^'])*?)'";b.variablePathDotNotation="\\."+lt;b.variableBracketsNotation="\\[[^\\]]*\\]";b.variablePathFunctionCall="\\([^\\)]*\\)";b.variablePathPartRegex="(?:"+b.variablePathDotNotation+"|"+b.variableBracketsNotation+"|"+b.variablePathFunctionCall+")";b.contextVariableRegex="context"+b.variablePathPartRegex+"*";b.placeholderVariablePathDotNotation="\\@@@cxtDot@@@"+lt;b.placeholderVariableBracketsNotation="@@@cxtOpenSquareBracket@@@[^\\]]*@@@cxtCloseSquareBracket@@@";b.placeholderVariablePathFunctionCall="@@@cxtOpenRoundBracket@@@[^\\)]*@@@cxtCloseRoundBracket@@@";b.placeholderVariablePathPartRegex="(?:"+b.placeholderVariablePathDotNotation+"|"+b.placeholderVariableBracketsNotation+"|"+b.placeholderVariablePathFunctionCall+")";b.placeholderContextVariableRegex="__CXT__"+b.placeholderVariablePathPartRegex+"*";function T(c,r){if(!r.global)throw Error("TypeError: matchAll called with a non-global RegExp argument");let e=[],t=r.exec(c);for(;t!==null;)e.push(t),t=r.exec(c);return r.lastIndex=0,e}function Kt(c,r,e){return[...c].sort(function(n,i){return typeof e=="function"&&(n=e(n),i=e(i)),r(n,i)})}function Xt(c){return c?.__ngContext__!==void 0}var Ie=class{constructor(r,e,t,n){this.configResolver=e,this.tagHookFinder=t,this.bindingsValueManager=n,this.savedBindings={},this.config=this.configResolver.processConfig(r),this.name=this.config.name}findHooks(r,e,t){let n=this.config.enclosing?this.tagHookFinder.findEnclosingTags(r,this.config.selector,this.config.bracketStyle,t):this.tagHookFinder.findSingleTags(r,this.config.selector,this.config.bracketStyle,t);return this.config.allowSelfClosing&&(n=[...n,...this.tagHookFinder.findSelfClosingTags(r,this.config.selector,this.config.bracketStyle,t)],n.sort((i,o)=>i.openingTagStartIndex-o.openingTagStartIndex)),n}loadComponent(r,e,t,n,i){return{component:this.config.component,hostElementTag:this.config.hostElementTag||this.config.selector,injector:this.config.injector,environmentInjector:this.config.environmentInjector}}getBindings(r,e,t,n){let i=this.savedBindings[r];return i===void 0&&(i=this.createBindings(e.openingTag),this.savedBindings[r]=i),this.bindingsValueManager.checkInputBindings(i.inputs,t,this.config,n),this.bindingsValueManager.checkOutputBindings(i.outputs,this.config,n),{inputs:this.getValuesFromSavedBindings(i.inputs),outputs:this.getValuesFromSavedBindings(i.outputs)}}createBindings(r){let e=this.collectRawInputs(r),t={};for(let[o,s]of Object.entries(e))t[o]={raw:s,parsed:!1,value:null,boundContextVariables:{}};let n=this.collectRawOutputs(r),i={};for(let[o,s]of Object.entries(n))i[o]={raw:s,parsed:!1,value:null,boundContextVariables:{}};return{inputs:t,outputs:i}}collectRawInputs(r){let e=this.getBindingsFromOpeningTag(r,"noBracketInputs",this.config.inputsBlacklist||null,this.config.inputsWhitelist||null),t=this.getBindingsFromOpeningTag(r,"bracketInputs",this.config.inputsBlacklist||null,this.config.inputsWhitelist||null);for(let[n,i]of Object.entries(e))e[n]="'"+i+"'";return w(w({},e),t)}collectRawOutputs(r){return this.getBindingsFromOpeningTag(r,"outputs",this.config.outputsBlacklist||null,this.config.outputsWhitelist||null)}getBindingsFromOpeningTag(r,e,t,n){let i={},o="(?:"+b.attributeValueDoubleQuotesRegex+"|"+b.attributeValueSingleQuotesRegex+")",s;switch(e){case"noBracketInputs":s=b.attributeNameNoBracketsRegex;break;case"bracketInputs":s=b.attributeNameBracketsRegex;break;case"outputs":s=b.attributeNameRoundBracketsRegex;break}let a=s+"="+o,l=new RegExp(a,"gim"),p=T(r,l);for(let u of p){let h=u[2]||u[3];h===void 0&&e==="noBracketInputs"&&(h=""),i[u[1]]=h}let d={};for(let[u,h]of Object.entries(i))t&&t.includes(u)||n&&!n.includes(u)||(d[u]=h);return d}getValuesFromSavedBindings(r){let e={};for(let[t,n]of Object.entries(r))e[t]=n.value;return e}},Te=class{constructor(r,e,t,n){this.configResolver=e,this.platformService=t,this.bindingsValueManager=n,this.savedBindings={},this.config=this.configResolver.processConfig(r),this.name=this.config.name}findHookElements(r,e,t){return Array.from(this.platformService.querySelectorAll(r,this.config.selector))}loadComponent(r,e,t,n,i){return this.scrubAngularBindingAttrs(e.element),{component:this.config.component,hostElementTag:this.config.hostElementTag,injector:this.config.injector,environmentInjector:this.config.environmentInjector}}getBindings(r,e,t,n){let i=this.savedBindings[r];return i===void 0&&(i=this.createBindings(e.elementSnapshot),this.savedBindings[r]=i),this.bindingsValueManager.checkInputBindings(i.inputs,t,this.config,n),this.bindingsValueManager.checkOutputBindings(i.outputs,this.config,n),{inputs:this.getValuesFromSavedBindings(i.inputs),outputs:this.getValuesFromSavedBindings(i.outputs)}}scrubAngularBindingAttrs(r){let e=Array.from(r.attributes).map(t=>t.name).filter(t=>t.startsWith("[")&&t.endsWith("]")||t.startsWith("(")&&t.endsWith(")"));for(let t of e)this.platformService.removeAttribute(r,t)}createBindings(r){let e=this.collectRawBindings(r,"inputs",this.config.inputsBlacklist||null,this.config.inputsWhitelist||null),t={};for(let[o,s]of Object.entries(e))t[o]={raw:s,parsed:!1,value:null,boundContextVariables:{}};let n=this.collectRawBindings(r,"outputs",this.config.outputsBlacklist||null,this.config.outputsWhitelist||null),i={};for(let[o,s]of Object.entries(n))i[o]={raw:s,parsed:!1,value:null,boundContextVariables:{}};return{inputs:t,outputs:i}}collectRawBindings(r,e,t,n){let i={},o=this.platformService.getAttributeNames(r);for(let a of o)if(e==="inputs"&&(!a.startsWith("(")||!a.endsWith(")"))||e==="outputs"&&a.startsWith("(")&&a.endsWith(")")){let l=this.platformService.getAttribute(r,a);e==="inputs"&&a.startsWith("[")&&a.endsWith("]")&&l===""&&(l=void 0),e==="inputs"&&(!a.startsWith("[")||!a.endsWith("]"))&&(l=`'${l}'`),a=a.replace(/^\[|^\(|\]$|\)$/g,""),i[a]=l}let s={};for(let[a,l]of Object.entries(i))t&&t.includes(a)||n&&!n.includes(a)||(s[a]=l);return s}getValuesFromSavedBindings(r){let e={};for(let[t,n]of Object.entries(r))e[t]=n.value;return e}},Gt={component:void 0,name:void 0,parseWithRegex:!1,selector:void 0,hostElementTag:void 0,injector:void 0,allowSelfClosing:!0,enclosing:!0,bracketStyle:{opening:"<",closing:">"},parseInputs:!0,unescapeStrings:!0,inputsBlacklist:void 0,inputsWhitelist:void 0,outputsBlacklist:void 0,outputsWhitelist:void 0,allowContextInBindings:!0,allowContextFunctionCalls:!0},Yt=(()=>{class c{constructor(){}processConfig(e){let t=JSON.parse(JSON.stringify(Gt));if(!e||!e.hasOwnProperty("component"))throw Error('Missing the required "component" property for the SelectorHookParserConfig. Must be either the component class or a LazyLoadComponentConfig.');if(t.component=e.component,e.component.hasOwnProperty("prototype")){let n=F(e.component);t.selector=n.selector}else if(e.component.hasOwnProperty("importPromise")&&e.component.hasOwnProperty("importName")){if(!e.hasOwnProperty("selector"))throw Error(`When using lazy-loaded dynamic components, you have to specify the "selector" property in the parser config, as the real selector can't be known before the component is loaded.`)}else throw Error('The "component" property in the SelectorHookParserConfig must either contain the component class or a LazyLoadComponentConfig.');if(e.hasOwnProperty("name")){if(typeof e.name!="string")throw Error('The submitted "name" property in the SelectorHookParserConfig must be of type string, was '+typeof e.name);t.name=e.name}if(e.hasOwnProperty("selector")){if(typeof e.selector!="string")throw Error('The submitted "selector" property in the SelectorHookParserConfig must be of type string, was '+typeof e.selector);t.selector=e.selector}if(e.hasOwnProperty("hostElementTag")){if(typeof e.hostElementTag!="string")throw Error('The submitted "hostElementTag" property in the SelectorHookParserConfig must be of type string, was '+typeof e.hostElementTag);t.hostElementTag=e.hostElementTag}if(e.hasOwnProperty("parseWithRegex")){if(typeof e.parseWithRegex!="boolean")throw Error('The submitted "parseWithRegex" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.parseWithRegex);t.parseWithRegex=e.parseWithRegex}if(e.hasOwnProperty("allowSelfClosing")){if(typeof e.allowSelfClosing!="boolean")throw Error('The submitted "allowSelfClosing" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.allowSelfClosing);t.allowSelfClosing=e.allowSelfClosing}if(e.hasOwnProperty("enclosing")){if(typeof e.enclosing!="boolean")throw Error('The submitted "enclosing" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.enclosing);t.enclosing=e.enclosing}if(e.hasOwnProperty("bracketStyle")){if(typeof e.bracketStyle!="object"||typeof e.bracketStyle.opening!="string"||typeof e.bracketStyle.closing!="string")throw Error('The submitted "bracketStyle" property in the SelectorHookParserConfig must have the form {opening: string, closing: string}');t.bracketStyle=e.bracketStyle}if(e.hasOwnProperty("injector")&&(t.injector=e.injector),e.hasOwnProperty("environmentInjector")&&(t.environmentInjector=e.environmentInjector),e.hasOwnProperty("unescapeStrings")){if(typeof e.unescapeStrings!="boolean")throw Error('The submitted "unescapeStrings" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.unescapeStrings);t.unescapeStrings=e.unescapeStrings}if(e.hasOwnProperty("parseInputs")){if(typeof e.parseInputs!="boolean")throw Error('The submitted "parseInputs" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.parseInputs);t.parseInputs=e.parseInputs}if(e.hasOwnProperty("inputsBlacklist")){if(!Array.isArray(e.inputsBlacklist))throw Error('The submitted "inputsBlacklist" property in the SelectorHookParserConfig must be an array of strings.');for(let n of e.inputsBlacklist)if(typeof n!="string")throw Error('All entries of the submitted "inputsBlacklist" property in the SelectorHookParserConfig must be of type string, '+typeof n+" found.");t.inputsBlacklist=e.inputsBlacklist}if(e.hasOwnProperty("inputsWhitelist")){if(!Array.isArray(e.inputsWhitelist))throw Error('The submitted "inputsWhitelist" property in the SelectorHookParserConfig must be an array of strings.');for(let n of e.inputsWhitelist)if(typeof n!="string")throw Error('All entries of the submitted "inputsWhitelist" property in the SelectorHookParserConfig must be of type string, '+typeof n+" found.");t.inputsWhitelist=e.inputsWhitelist}if(e.hasOwnProperty("outputsBlacklist")){if(!Array.isArray(e.outputsBlacklist))throw Error('The submitted "outputsBlacklist" property in the SelectorHookParserConfig must be an array of strings.');for(let n of e.outputsBlacklist)if(typeof n!="string")throw Error('All entries of the submitted "outputsBlacklist" property in the SelectorHookParserConfig must be of type string, '+typeof n+" found.");t.outputsBlacklist=e.outputsBlacklist}if(e.hasOwnProperty("outputsWhitelist")){if(!Array.isArray(e.outputsWhitelist))throw Error('The submitted "outputsWhitelist" property in the SelectorHookParserConfig must be an array of strings.');for(let n of e.outputsWhitelist)if(typeof n!="string")throw Error('All entries of the submitted "outputsWhitelist" property in the SelectorHookParserConfig must be of type string, '+typeof n+" found.");t.outputsWhitelist=e.outputsWhitelist}if(e.hasOwnProperty("allowContextInBindings")){if(typeof e.allowContextInBindings!="boolean")throw Error('The submitted "allowContextInBindings" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.allowContextInBindings);t.allowContextInBindings=e.allowContextInBindings}if(e.hasOwnProperty("allowContextFunctionCalls")){if(typeof e.allowContextFunctionCalls!="boolean")throw Error('The submitted "allowContextFunctionCalls" property in the SelectorHookParserConfig must be of type boolean, was '+typeof e.allowContextFunctionCalls);t.allowContextFunctionCalls=e.allowContextFunctionCalls}return t}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),Jt=new q("An injection token to retrieve an optionally user-provided PlatformService"),en=(()=>{class c{constructor(e,t,n){this.document=e,this.rendererFactory=t,this.sanitizer=n,this.renderer=this.rendererFactory.createRenderer(null,null)}getNgVersion(){if(typeof this.document<"u"){let t=this.querySelectorAll(this.document,"[ng-version]")?.[0]?.getAttribute("ng-version");if(t)return parseInt(t,10)}return null}sanitize(e){return this.sanitizer.sanitize($e.HTML,e)||""}createElement(e){return this.renderer.createElement(e)}sortElements(e,t){return e===t?0:e.compareDocumentPosition?e.compareDocumentPosition(t)&2?1:-1:e.sourceIndex-t.sourceIndex}cloneElement(e){return e.cloneNode(!0)}getTagName(e){return e.tagName}getOpeningTag(e){let t=e.innerHTML.length,n=e.outerHTML.length,i=e.outerHTML[n-2]==="/"?n:n-t-e.tagName.length-3;return e.outerHTML.slice(0,i)}getClosingTag(e){return e.outerHTML.slice(e.outerHTML.length-e.tagName.length-3)}getAttributeNames(e){return typeof e.getAttributeNames=="function"?e.getAttributeNames():[]}getAttribute(e,t){return typeof e.getAttribute=="function"?e.getAttribute(t):null}setAttribute(e,t,n){this.renderer.setAttribute(e,t,n)}removeAttribute(e,t){this.renderer.removeAttribute(e,t)}getParentNode(e){try{return this.renderer.parentNode(e)}catch{return null}}querySelectorAll(e,t){return Array.from(e.querySelectorAll(t))}getChildNodes(e){return Array.prototype.slice.call(e.childNodes)}appendChild(e,t){this.renderer.appendChild(e,t)}insertBefore(e,t,n){this.renderer.insertBefore(e,t,n)}clearChildNodes(e){if(e)for(;e.firstChild;)this.removeChild(e,e.firstChild)}removeChild(e,t){e.removeChild(t)}getInnerContent(e){return e.innerHTML}setInnerContent(e,t){e&&(e.innerHTML=t)}isTextNode(e){return e.nodeType===Node.TEXT_NODE}createTextNode(e){return document.createTextNode(e)}getTextContent(e){return e.textContent}dispatchEvent(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}static{this.\u0275fac=function(t){return new(t||c)(m(We),m(_e),m(qe))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),_=(()=>{class c{constructor(e,t){this.userPlatformService=e,this.defaultPlatformService=t}getFor(e){return this.userPlatformService&&typeof this.userPlatformService[e]=="function"?this.userPlatformService:this.defaultPlatformService}getNgVersion(){return this.getFor("getNgVersion").getNgVersion()}sanitize(e){return this.getFor("sanitize").sanitize(e)}createElement(e){return this.getFor("createElement").createElement(e)}sortElements(e,t){return this.getFor("sortElements").sortElements(e,t)}cloneElement(e){return this.getFor("cloneElement").cloneElement(e)}getTagName(e){return this.getFor("getTagName").getTagName(e)}getOpeningTag(e){return this.getFor("getOpeningTag").getOpeningTag(e)}getClosingTag(e){return this.getFor("getClosingTag").getClosingTag(e)}getAttributeNames(e){return this.getFor("getAttributeNames").getAttributeNames(e)}getAttribute(e,t){return this.getFor("getAttribute").getAttribute(e,t)}setAttribute(e,t,n){return this.getFor("setAttribute").setAttribute(e,t,n)}removeAttribute(e,t){return this.getFor("removeAttribute").removeAttribute(e,t)}getParentNode(e){return this.getFor("getParentNode").getParentNode(e)}querySelectorAll(e,t){return this.getFor("querySelectorAll").querySelectorAll(e,t)}getChildNodes(e){return this.getFor("getChildNodes").getChildNodes(e)}appendChild(e,t){return this.getFor("appendChild").appendChild(e,t)}insertBefore(e,t,n){return this.getFor("insertBefore").insertBefore(e,t,n)}clearChildNodes(e){return this.getFor("clearChildNodes").clearChildNodes(e)}removeChild(e,t){return this.getFor("removeChild").removeChild(e,t)}getInnerContent(e){return this.getFor("getInnerContent").getInnerContent(e)}setInnerContent(e,t){return this.getFor("setInnerContent").setInnerContent(e,t)}isTextNode(e){return this.getFor("isTextNode").isTextNode(e)}createTextNode(e){return this.getFor("createTextNode").createTextNode(e)}getTextContent(e){return this.getFor("getTextContent").getTextContent(e)}dispatchEvent(e,t,n){return this.getFor("dispatchEvent").dispatchEvent(e,t,n)}static{this.\u0275fac=function(t){return new(t||c)(m(Jt,8),m(en))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),N=(()=>{class c{constructor(e){this.platformId=e}log(e,t){this.handleLog(e,t,"log")}warn(e,t){this.handleLog(e,t,"warn")}error(e,t){this.handleLog(e,t,"error")}handleLog(e,t,n){(t.logOptions?.dev&&this.isDevMode()&&Z(this.platformId)||t.logOptions?.prod&&!this.isDevMode()&&Z(this.platformId)||t.logOptions?.ssr&&!Z(this.platformId))&&console[n](...e)}isDevMode(){return Ve()}static{this.\u0275fac=function(t){return new(t||c)(m(he))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),tn=(()=>{class c{constructor(e){this.logger=e}find(e,t,n,i,o=j()){return n?this.findEnclosingHooks(e,t,n,i,o):this.findSingletagHooks(e,t)}findSingletagHooks(e,t){let n=[],i=T(e,t);for(let o of i)n.push({openingTagStartIndex:o.index,openingTagEndIndex:o.index+o[0].length,closingTagStartIndex:null,closingTagEndIndex:null});return n}findEnclosingHooks(e,t,n,i,o=j()){let s=[],a=[],l=T(e,t);for(let u of l)s.push({isOpening:!0,value:u[0],startIndex:u.index,endIndex:u.index+u[0].length});let p=T(e,n);for(let u of p)s.push({isOpening:!1,value:u[0],startIndex:u.index,endIndex:u.index+u[0].length});s.sort((u,h)=>u.startIndex-h.startIndex);let d=[];for(let[u,h]of s.entries()){if(u>0&&h.startIndex<s[u-1].endIndex){this.logger.warn(['Syntax error - New tag "'+h.value+'" started at position '+h.startIndex+' before previous tag "'+s[u-1].value+'" ended at position '+s[u-1].endIndex+". Ignoring."],o);continue}if(h.isOpening)d.push(h);else{if(d.length===0){this.logger.warn(['Syntax error - Closing tag without preceding opening tag found: "'+h.value+'". Ignoring.'],o);continue}if(i===!1&&d.length>1){d.pop();continue}let f=d[d.length-1];a.push({openingTagStartIndex:f.startIndex,openingTagEndIndex:f.startIndex+f.value.length,closingTagStartIndex:h.startIndex,closingTagEndIndex:h.startIndex+h.value.length}),d.pop()}}return d.length>0&&this.logger.warn(["Syntax error - Opening tags without corresponding closing tags found."],o),a}static{this.\u0275fac=function(t){return new(t||c)(m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),nn=(()=>{class c{constructor(e){this.hookFinder=e}findSingleTags(e,t,n={opening:"<",closing:">"},i){let o=this.generateOpeningTagRegex(t,n);return this.hookFinder.find(e,o,void 0,void 0,i)}findEnclosingTags(e,t,n={opening:"<",closing:">"},i){let o=this.generateOpeningTagRegex(t,n),s=this.generateClosingTagRegex(t,n);return this.hookFinder.find(e,o,s,!0,i)}findSelfClosingTags(e,t,n={opening:"<",closing:">"},i){let o=this.generateOpeningTagRegex(t,n,!0);return this.hookFinder.find(e,o,void 0,void 0,i)}generateOpeningTagRegex(e,t={opening:"<",closing:">"},n=!1){let i=this.escapeRegex(t.opening),o=this.escapeRegex(e),s=(n?"\\/":"")+this.escapeRegex(t.closing),a="\\s",l="(?:"+b.attributeValueDoubleQuotesRegex+"|"+b.attributeValueSingleQuotesRegex+")",p="(?:"+a+"+"+b.attributeNameRegex+"="+l+")+",d=i+o+"(?:"+a+"*"+s+"|"+p+a+"*"+s+")";return new RegExp(d,"gim")}generateClosingTagRegex(e,t={opening:"<",closing:">"}){let n=this.escapeRegex(t.opening)+"/",i=this.escapeRegex(e),o=this.escapeRegex(t.closing),s=n+i+o;return new RegExp(s,"gim")}escapeRegex(e){return e.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")}static{this.\u0275fac=function(t){return new(t||c)(m(tn))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),on=(()=>{class c{encodeSubstrings(e){let t=T(e,/'/gm).filter(p=>p.index===0||e[p.index-1]!=="\\"),n=T(e,/"/gm).filter(p=>p.index===0||e[p.index-1]!=="\\"),i=T(e,/`/gm).filter(p=>p.index===0||e[p.index-1]!=="\\"),o=[...t,...n,...i];o.sort((p,d)=>p.index-d.index);let s=[],a=null;for(let p of o)a?a[0]===p[0]&&(s.push({startIndex:a.index+1,endIndex:p.index}),a=null):a=p;if(a!==null)throw Error("Input parse error. String was opened, but not closed.");return this.encodeTextSegments(e,s,this.encodeStringSpecialChars)}encodeStringSpecialChars(e){return e=e.replace(/'/g,"@@@singlequote@@@"),e=e.replace(/"/g,"@@@doublequote@@@"),e=e.replace(/`/g,"@@@gravequote@@@"),e=e.replace(/:/g,"@@@colon@@@"),e=e.replace(/;/g,"@@@semicolon@@@"),e=e.replace(/\./g,"@@@dot@@@"),e=e.replace(/,/g,"@@@comma@@@"),e=e.replace(/\\/g,"@@@backslash@@@"),e=e.replace(/\(/g,"@@@openRoundBracket@@@"),e=e.replace(/\)/g,"@@@closeRoundBracket@@@"),e=e.replace(/\[/g,"@@@openSquareBracket@@@"),e=e.replace(/\]/g,"@@@closeSquareBracket@@@"),e=e.replace(/\{/g,"@@@openCurlyBracket@@@"),e=e.replace(/\}/g,"@@@closeCurlyBracket@@@"),e}decodeStringSpecialChars(e){return e=e.replace(/@@@singlequote@@@/g,"'"),e=e.replace(/@@@doublequote@@@/g,'"'),e=e.replace(/@@@gravequote@@@/g,"`"),e=e.replace(/@@@colon@@@/g,":"),e=e.replace(/@@@semicolon@@@/g,";"),e=e.replace(/@@@dot@@@/g,"."),e=e.replace(/@@@comma@@@/g,","),e=e.replace(/@@@backslash@@@/g,"\\"),e=e.replace(/@@@openRoundBracket@@@/g,"("),e=e.replace(/@@@closeRoundBracket@@@/g,")"),e=e.replace(/@@@openSquareBracket@@@/g,"["),e=e.replace(/@@@closeSquareBracket@@@/g,"]"),e=e.replace(/@@@openCurlyBracket@@@/g,"{"),e=e.replace(/@@@closeCurlyBracket@@@/g,"}"),e}encodeSubfunctions(e){let t=T(e,/\(/gm),n=T(e,/\)/gm),i=[...t,...n];i.sort((l,p)=>l.index-p.index);let o=[],s=[];for(let l of i)if(l[0]==="(")s.push(l);else{if(s.length===0)throw Error("Input parse error. Closed function bracket without opening it first.");s.length===1&&o.push({startIndex:s[0].index+1,endIndex:l.index}),s.pop()}if(s.length!==0)throw Error("Input parse error. Opened function bracket without closing it.");return this.encodeTextSegments(e,o,this.encodeFunctionBrackets)}encodeFunctionBrackets(e){return e=e.replace(/\(/g,"@@@fnOpenBracket@@@"),e=e.replace(/\)/g,"@@@fnCloseBracket@@@"),e}decodeFunctionBrackets(e){return e=e.replace(/@@@fnOpenBracket@@@/g,"("),e=e.replace(/@@@fnCloseBracket@@@/g,")"),e}encodeVariableSubbrackets(e){let t="(?<=[a-zA-Z_$\\])])\\[",n="(?:[a-zA-Z_$\\])])(\\[)",i=T(e,new RegExp(n,"gm")),o=[];for(let l of i){let p=e.substring(l.index+2),d=T(p,/\[/gm),u=T(p,/\]/gm),h=[...d,...u];h.sort((g,v)=>g.index-v.index);let f=1;for(let g of h)if(f=g[0]==="]"?f-1:f+1,f===0){o.push({startIndex:l.index+2,endIndex:l.index+2+g.index});break}if(f!==0)throw Error("Input parse error. Opened bracket without closing it.")}let s=[];for(let l of o)(s.length===0||s[s.length-1].endIndex<l.startIndex)&&s.push(l);return this.encodeTextSegments(e,s,this.encodeVariableBrackets)}encodeVariableBrackets(e){return e=e.replace(/\[/g,"@@@variableOpeningBracket@@@"),e=e.replace(/\]/g,"@@@variableClosingBracket@@@"),e}decodeVariableBrackets(e){return e=e.replace(/@@@variableOpeningBracket@@@/g,"["),e=e.replace(/@@@variableClosingBracket@@@/g,"]"),e}transformContextVarIntoPlacerholder(e){return e="__CXT__"+e.substring(7),e=e.replace(/\"/g,"@@@cxtDoubleQuote@@@"),e=e.replace(/\./g,"@@@cxtDot@@@"),e=e.replace(/\[/g,"@@@cxtOpenSquareBracket@@@"),e=e.replace(/\]/g,"@@@cxtCloseSquareBracket@@@"),e=e.replace(/\(/g,"@@@cxtOpenRoundBracket@@@"),e=e.replace(/\)/g,"@@@cxtCloseRoundBracket@@@"),e}transformPlaceholderIntoContextVar(e){return e="context"+e.substring(7),e=e.replace(/@@@cxtDoubleQuote@@@/g,'"'),e=e.replace(/@@@cxtDot@@@/g,"."),e=e.replace(/@@@cxtOpenSquareBracket@@@/g,"["),e=e.replace(/@@@cxtCloseSquareBracket@@@/g,"]"),e=e.replace(/@@@cxtOpenRoundBracket@@@/g,"("),e=e.replace(/@@@cxtCloseRoundBracket@@@/g,")"),e}encodeTextSegments(e,t,n){let i=[];for(let a of t){let l=i.length===0?0:i[i.length-1].endIndex;i.push({type:"text",startIndex:l,endIndex:a.startIndex,string:e.substring(l,a.startIndex)}),i.push({type:"special",startIndex:a.startIndex,endIndex:a.endIndex,string:e.substring(a.startIndex,a.endIndex)})}let o=i.length===0?0:i[i.length-1].endIndex;i.push({type:"text",startIndex:o,endIndex:e.length-1,string:e.substring(o)});for(let a of i)a.type==="special"&&(a.string=n(a.string));let s="";for(let a of i)s+=a.string;return s}stripSlashes(e){return e.replace(/\\(.)/g,"$1")}escapeDoubleQuotes(e){return e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),rn=(()=>{class c{constructor(e,t){this.dataTypeEncoder=e,this.logger=t}evaluate(e,t={},n,i=!0,o={},s=!0,a=j()){if(e==="null")return null;if(e!=="undefined"){if(e==="true")return!0;if(e==="false")return!1;if(!isNaN(e))return parseInt(e,10);if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")||e.startsWith("`")&&e.endsWith("`")){let l=e.substring(1,e.length-1);return l=i?this.dataTypeEncoder.stripSlashes(l):l,l}if(e=this.encodeDataTypeString(e),e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]")){let l=this.parseAsJSON(e,i);return this.loadJSONVariables(l,t,n,i,o,s,a)}if(e==="$event")return n;if(e.match(new RegExp("^\\s*"+b.contextVariableRegex+"\\s*$","gm")))return this.loadContextVariable(e,t,n,i,o,s,a);throw Error('Data type for following input was not recognized and could not be parsed: "'+e+'"')}}encodeDataTypeString(e){return e=this.dataTypeEncoder.encodeSubstrings(e),e=this.dataTypeEncoder.encodeSubfunctions(e),e=this.dataTypeEncoder.encodeVariableSubbrackets(e),e}decodeDataTypeString(e){return e=this.dataTypeEncoder.decodeStringSpecialChars(e),e=this.dataTypeEncoder.decodeFunctionBrackets(e),e=this.dataTypeEncoder.decodeVariableBrackets(e),e=e.trim(),e}parseAsJSON(e,t){let n=/\'(\\.|[^\'])*?\'/gm;e=e.replace(n,a=>'"'+a.slice(1,-1)+'"');let i=/\`(\\.|[^\`])*?\`/gm;e=e.replace(i,a=>'"'+a.slice(1,-1)+'"');let o=/"?([a-z0-9A-Z_]+)"?\s*:/g;if(e=e.replace(o,'"$1": '),e.match(/"?__proto__"?\s*:/g))throw Error('Setting the "__proto__" property in a hook input object is not allowed.');if(e.match(/"?prototype"?\s*:/g))throw Error('Setting the "prototype" property in a hook input object is not allowed.');if(e.match(/"?constructor"?\s*:/g))throw Error('Setting the "constructor" property in a hook input object is not allowed.');e=this.replaceValuesInJSONString(e,"undefined",a=>"null"),e=this.replaceValuesInJSONString(e,b.contextVariableRegex,a=>'"'+this.dataTypeEncoder.transformContextVarIntoPlacerholder(a)+'"'),e=this.replaceValuesInJSONString(e,"\\$event",a=>'"__EVENT__"');let s=JSON.parse(e);return this.decodeJSONStrings(s,t),s}replaceValuesInJSONString(e,t,n){let i="(?:(?<=:\\s*)"+t+"(?=\\s*[,}])|(?<=[\\[,]\\s*)"+t+"(?=\\s*[\\],]))",o="(?:(:\\s*)("+t+")(?=\\s*[,}])|([\\[,]\\s*)("+t+")(?=\\s*[\\],]))";return e.replace(new RegExp(o,"gm"),(s,a,l,p,d)=>(a||p)+n(l||d))}decodeJSONStrings(e,t){for(let n in e)if(typeof e[n]=="string"){if(e[n]==='__EVENT__"'||e[n].match(new RegExp("^\\s*"+b.placeholderContextVariableRegex+"\\s*$","gm")))continue;let i=this.decodeDataTypeString(e[n]);i=t?this.dataTypeEncoder.stripSlashes(i):i,e[n]=i}else typeof e[n]=="object"&&this.decodeJSONStrings(e[n],t)}loadJSONVariables(e,t,n,i,o,s,a){for(let l in e)if(typeof e[l]=="string"){if(e[l]==="__EVENT__")e[l]=n;else if(e[l].match(new RegExp("^\\s*"+b.placeholderContextVariableRegex+"\\s*$","gm"))){let p=this.dataTypeEncoder.transformPlaceholderIntoContextVar(e[l].trim());e[l]=this.loadContextVariable(p,t,n,i,o,s,a)}}else typeof e[l]=="object"&&this.loadJSONVariables(e[l],t,n,i,o,s,a);return e}loadContextVariable(e,t={},n,i=!0,o={},s=!0,a=j()){try{let l=e.substring(7);if(l.trim()==="")return t;let p=[],d=T(l,new RegExp(b.variablePathPartRegex,"gm"));for(let u of d){if(u[0].startsWith(".")&&p.push({type:"property",value:u[0].substring(1)}),u[0].startsWith("[")&&u[0].endsWith("]")){let h=u[0].substring(1,u[0].length-1);h=this.decodeDataTypeString(h),h=this.evaluate(h,t,n,i,o,s),p.push({type:"property",value:h})}if(u[0].startsWith("(")&&u[0].endsWith(")")){if(!s)throw Error("Tried to call a function in a context variable. This has been disallowed in the current config.");let h=u[0].substring(1,u[0].length-1),f=[];if(h!=="")for(let g of h.split(",")){let v=this.decodeDataTypeString(g);v=this.evaluate(v,t,n,i,o,s),f.push(v)}p.push({type:"function",value:f})}}try{let u=this.fetchContextVariable(t,p);return o[this.decodeDataTypeString(e)]=u,u}catch{throw Error('The required context variable "'+this.decodeDataTypeString(e)+'" could not be found in the context object. Returning undefined instead.')}}catch(l){this.logger.warn([l],a),o[this.decodeDataTypeString(e)]=void 0;return}}fetchContextVariable(e,t){if(t[0].value==="__proto__")throw Error("Accessing the __proto__ property through a context variable is not allowed.");if(t[0].value==="prototype")throw Error("Accessing the prototype property through a context variable is not allowed.");if(t[0].value==="constructor")throw Error("Accessing the constructor property through a context variable is not allowed.");if(e===void 0)throw Error("Context variable path could not be resolved. Trying to access "+(t[0].type==="property"?'property "'+t[0].value+'" of undefined.':"undefined function."));let n;return t[0].type==="property"?e.hasOwnProperty(t[0].value)?(n=e[t[0].value],typeof n=="function"&&(n=n.bind(e))):e.__proto__.hasOwnProperty(t[0].value)?(n=e.__proto__[t[0].value],typeof n=="function"&&(n=n.bind(e))):n=void 0:t[0].type==="function"&&(n=e(...t[0].value)),t.shift(),t.length>0&&(n=this.fetchContextVariable(n,t)),n}static{this.\u0275fac=function(t){return new(t||c)(m(on),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),sn=(()=>{class c{constructor(e,t){this.dataTypeParser=e,this.logger=t}checkInputBindings(e,t,n,i){for(let[o,s]of Object.entries(e))if(!n.parseInputs)s.value=s.raw;else if(s.parsed)this.updateInputBindingIfStale(s,t,n);else try{s.value=this.dataTypeParser.evaluate(s.raw,n.allowContextInBindings?t:{},void 0,n.unescapeStrings,s.boundContextVariables,n.allowContextFunctionCalls,i),s.parsed=!0}catch(a){this.logger.error([`Hook input parsing error
selector: `+n.selector+`
input: `+o+`
value: "`+s.value+'"'],i),this.logger.error([a.stack],i),delete e[o]}}updateInputBindingIfStale(e,t,n){if(Object.keys(e.boundContextVariables).length>0){let i=!1;for(let[o,s]of Object.entries(e.boundContextVariables)){let a=this.dataTypeParser.encodeDataTypeString(o);if(this.dataTypeParser.loadContextVariable(a,t,void 0,n.unescapeStrings,{},n.allowContextFunctionCalls)!==s){i=!0;break}}i&&(e.boundContextVariables={},e.value=this.dataTypeParser.evaluate(e.raw,n.allowContextInBindings?t:{},void 0,n.unescapeStrings,e.boundContextVariables,n.allowContextFunctionCalls))}}checkOutputBindings(e,t,n){for(let[i,o]of Object.entries(e))o.parsed||(o.value=(s,a)=>{try{this.dataTypeParser.evaluate(o.raw,t.allowContextInBindings?a:{},s,t.unescapeStrings,o.boundContextVariables,t.allowContextFunctionCalls)}catch(l){this.logger.error([`Hook output parsing error
selector: `+t.selector+`
output: `+i+`
value: "`+o.value+'"'],n),this.logger.error([l.stack],n)}},o.parsed=!0)}static{this.\u0275fac=function(t){return new(t||c)(m(rn),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),an=(()=>{class c{constructor(e,t,n,i,o,s){this.injector=e,this.parserResolver=t,this.platformService=n,this.tagHookFinder=i,this.bindingsValueManager=o,this.logger=s}resolve(e,t,n,i,o){let s=[];for(let p of e){let d=this.resolveEntry(p,t,o);d&&s.push(d)}let a=this.validateParserFunctions(s,o);if(this.checkParserNames(a,o),!n&&!i)return a;this.checkBlackAndWhitelist(a,n,i,o);let l=[];for(let p of a)p.hasOwnProperty("name")&&typeof p.name=="string"&&(n&&n.includes(p.name)||i&&!i.includes(p.name))||l.push(p);return l}resolveEntry(e,t,n){if(e.hasOwnProperty("prototype")){if(F(e))return this.createSelectorHookParser({component:e});try{return t.get(e)}catch{return new e}}else if(typeof e=="object"){if(e.constructor.name!=="Object")return e;try{return this.createSelectorHookParser(e)}catch(i){return this.logger.error(["Invalid parser config - "+i.message,e],n),null}}return this.logger.error(["Invalid parser config - ",e],n),null}createSelectorHookParser(e){return e.hasOwnProperty("parseWithRegex")&&e.parseWithRegex||e.hasOwnProperty("enclosing")&&!e.enclosing||e.hasOwnProperty("bracketStyle")&&e.bracketStyle?new Ie(e,this.parserResolver,this.tagHookFinder,this.bindingsValueManager):new Te(e,this.parserResolver,this.platformService,this.bindingsValueManager)}validateParserFunctions(e,t){let n=[];for(let i of e){if(typeof i.findHooks!="function"&&typeof i.findHookElements!="function"){this.logger.error(['Submitted parser neither implements "findHooks()" nor "findHookElements()". One is required. Removing from list of active parsers:',i],t);continue}if(typeof i.loadComponent!="function"){this.logger.error(['Submitted parser does not implement "loadComponent()". Removing from list of active parsers:',i],t);continue}if(typeof i.getBindings!="function"){this.logger.error(['Submitted parser does not implement "getBindings()". Removing from list of active parsers:',i],t);continue}n.push(i)}return n}checkParserNames(e,t){let n=e.map(s=>s.name).filter(s=>s!==void 0),i=[],o=[];for(let s of n)i.includes(s)&&!o.includes(s)&&(this.logger.warn(['Parser name "'+s+'" is not unique and appears multiple times in the list of active parsers.'],t),o.push(s)),i.push(s)}checkBlackAndWhitelist(e,t,n,i){let o=e.map(s=>s.name).filter(s=>s!==void 0);if(t)for(let s of t)o.includes(s)||this.logger.warn(['Blacklisted parser name "'+s+'" does not appear in the list of global parsers names. Make sure both spellings are identical.'],i);if(n)for(let s of n)o.includes(s)||this.logger.warn(['Whitelisted parser name "'+s+'" does not appear in the list of global parsers names. Make sure both spellings are identical.'],i)}static{this.\u0275fac=function(t){return new(t||c)(m(ee),m(Yt),m(_),m(nn),m(sn),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),ln=(()=>{class c{constructor(e){this.parserEntryResolver=e}resolve(e,t,n,i,o,s=null,a=null,l=null,p=null){let d={};n=n||[],i=i||[],o=o||{};let u={options:j()};!o.hasOwnProperty("inheritance")||o.inheritance===Se.Linear?d=this.mergeSettings([u,...i,{parsers:s||void 0,options:a||void 0}]):o.inheritance===Se.All?d=this.mergeSettings([u,...n,...i,{options:a||void 0}]):d=this.mergeSettings([u,o||{},{options:a||void 0}]);let h=d.options;t&&typeof t!="string"&&(h.sanitize=!1);let f=[];return s?f=this.parserEntryResolver.resolve(s,e,null,null,h):d.parsers&&(f=this.parserEntryResolver.resolve(d.parsers,e,l,p,h)),{parsers:f,options:h}}mergeSettings(e){let t={};for(let n of e){if(n.parsers!==void 0){t.parsers===void 0&&(t.parsers=[]);for(let i of n.parsers)t.parsers.includes(i)||t.parsers.push(i)}n.options!==void 0&&(t.options===void 0&&(t.options={}),t.options=this.recursiveAssign(t.options,n.options))}return t}recursiveAssign(e,t){if(Object(t)!==t)return t;Object(e)!==e&&(e={});for(let n in t)e[n]=this.recursiveAssign(e[n],t[n]);return e}static{this.\u0275fac=function(t){return new(t||c)(m(an))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),at="_ngx_dynamic_hooks_node_placeholder",cn=(()=>{class c{constructor(e,t){this.platformService=e,this.logger=t}findInElement(e,t,n,i,o,s){for(let a of n)if(typeof a.findHooks=="function"){this.checkElement(e,t,n,i,o,s);break}}checkElement(e,t,n,i,o,s,a={counter:0,nodes:{}}){let l=this.platformService.getChildNodes(e),p="",d={};for(let f of l)if(this.platformService.isTextNode(f))p+=this.platformService.getTextContent(f);else{let g=a.counter++;p+=`${at}__${g}__`,d[g]=f}let u=Object.keys(s).length,h=this.find(p,t,n,i,o,s);if(Object.keys(s).length>u&&(this.platformService.clearChildNodes(e),this.platformService.setInnerContent(e,h.content),l=this.platformService.getChildNodes(e),a.nodes=w(w({},a.nodes),d)),Object.keys(a.nodes).length){for(let f of l)if(this.platformService.isTextNode(f)){let g=this.platformService.getTextContent(f);if(g){let v=T(g,new RegExp(`${at}__(\\d*)__`,"g"));if(v.length){let x=[],B=0;for(let R of v){let Be=g.substring(B,R.index),Y=parseInt(R[1]);Be&&x.push(this.platformService.createTextNode(Be)),Y&&a.nodes[Y]&&(x.push(a.nodes[Y]),delete a.nodes[Y]),B=R.index+R[0].length}let W=g.substring(B);W&&x.push(this.platformService.createTextNode(W));let M=this.platformService.getParentNode(f);for(let R of x)this.platformService.insertBefore(M,R,f);this.platformService.removeChild(M,f),l=this.platformService.getChildNodes(M)}}}}for(let f of l)f.nodeType!==Node.TEXT_NODE&&this.checkElement(f,t,n,i,o,s,a)}find(e,t,n,i,o,s){if(e==="")return{content:e,hookIndex:s};o.convertHTMLEntities&&(e=this.convertHTMLEntities(e));let a=[];for(let p of n)if(typeof p.findHooks=="function")for(let d of p.findHooks(e,t,o))a.push({parser:p,hookPosition:d});a.sort((p,d)=>p.hookPosition.openingTagStartIndex-d.hookPosition.openingTagStartIndex),a=this.validateHookPositions(a,e,o);let l=[];for(let p of a){let d=Object.keys(s).length+1,u=this.getHookSegments(p.hookPosition,e);if(l.push({startIndex:p.hookPosition.openingTagStartIndex,endIndex:p.hookPosition.openingTagEndIndex,replacement:`<${we} ${I}="${d}" ${E}="${i}">`}),l.push({startIndex:u.enclosing?p.hookPosition.closingTagStartIndex:p.hookPosition.openingTagEndIndex,endIndex:u.enclosing?p.hookPosition.closingTagEndIndex:p.hookPosition.openingTagEndIndex,replacement:`</${we}>`}),s[d]={id:d,parser:p.parser,value:{openingTag:u.openingTag,closingTag:u.closingTag,element:null,elementSnapshot:null},data:null,isLazy:!1,bindings:null,previousBindings:null,componentRef:null,dirtyInputs:new Set,outputSubscriptions:{},htmlEventSubscriptions:{}},u.enclosing&&o.fixParagraphTags){let h=this.removeTagArtifacts(u.textBefore,"<p>","</p>",u.innerValue,"</p>","<p>");u.textBefore=h.firstText,u.innerValue=h.secondText;let f=this.removeTagArtifacts(u.innerValue,"<p>","</p>",u.textAfter,"</p>","<p>");u.innerValue=f.firstText,u.textAfter=f.secondText,e=u.textBefore+u.openingTag+u.innerValue+u.closingTag+u.textAfter}}l.sort((p,d)=>d.startIndex-p.startIndex);for(let p of l){let d=e.substring(0,p.startIndex),u=e.substring(p.endIndex);e=d+p.replacement+u}return{content:e,hookIndex:s}}getHookSegments(e,t){let n=Number.isInteger(e.closingTagStartIndex)&&Number.isInteger(e.closingTagEndIndex);return{enclosing:n,textBefore:t.substring(0,e.openingTagStartIndex),openingTag:t.substring(e.openingTagStartIndex,e.openingTagEndIndex),innerValue:n?t.substring(e.openingTagEndIndex,e.closingTagStartIndex):null,closingTag:n?t.substring(e.closingTagStartIndex,e.closingTagEndIndex):null,textAfter:n?t.substring(e.closingTagEndIndex):t.substring(e.openingTagEndIndex)}}validateHookPositions(e,t,n){let i=[];e:for(let[o,s]of e.entries()){let a=Number.isInteger(s.hookPosition.closingTagStartIndex)&&Number.isInteger(s.hookPosition.closingTagEndIndex),l=s.hookPosition;if(l.openingTagStartIndex>=l.openingTagEndIndex){this.logger.warn(["Text hook error: openingTagEndIndex has to be greater than openingTagStartIndex. Ignoring.",l],n);continue}if(a&&l.openingTagEndIndex>l.closingTagStartIndex){this.logger.warn(["Text hook error: closingTagStartIndex has to be greater than openingTagEndIndex. Ignoring.",l],n);continue}if(a&&l.closingTagStartIndex>=l.closingTagEndIndex){this.logger.warn(["Text hook error: closingTagEndIndex has to be greater than closingTagStartIndex. Ignoring.",l],n);continue}let p=e.slice(0,o);for(let d of p){let u=d.hookPosition,h=Number.isInteger(u.closingTagStartIndex)&&Number.isInteger(u.closingTagEndIndex);if(l.openingTagStartIndex===u.openingTagStartIndex&&l.openingTagEndIndex===u.openingTagEndIndex&&(!a||!h||l.closingTagStartIndex===u.closingTagStartIndex&&l.closingTagEndIndex===u.closingTagEndIndex)){this.generateHookPosWarning("A text hook with the same position as another text hook was found. There may be multiple parsers looking for the same text pattern. Ignoring duplicates.",l,u,t,n);continue e}if(l.openingTagStartIndex<u.openingTagEndIndex){this.generateHookPosWarning("Text hook error: Hook opening tag starts before previous hook opening tag ends. Ignoring.",l,u,t,n);continue e}if(h&&!(l.openingTagEndIndex<=u.closingTagStartIndex||l.openingTagStartIndex>=u.closingTagEndIndex)){this.generateHookPosWarning("Text hook error: Opening tag of hook overlaps with closing tag of previous hook. Ignoring.",l,u,t,n);continue e}if(h&&a&&!(l.closingTagEndIndex<=u.closingTagStartIndex||l.closingTagStartIndex>=u.closingTagEndIndex)){this.generateHookPosWarning("Text hook error: Closing tag of hook overlaps with closing tag of previous hook. Ignoring.",l,u,t,n);continue e}if(a&&h&&l.openingTagEndIndex<=u.closingTagStartIndex&&l.closingTagStartIndex>=u.closingTagEndIndex){this.generateHookPosWarning("Text hook error: The closing tag of a nested hook lies beyond the closing tag of the outer hook. Ignoring.",l,u,t,n);continue e}}i.push(s)}return i}generateHookPosWarning(e,t,n,i,o){let s=this.getHookSegments(n,i),a=this.getHookSegments(t,i),l={openingTag:s.openingTag,openingTagStartIndex:n.openingTagStartIndex,openingTagEndIndex:n.openingTagEndIndex,closingTag:s.closingTag,closingTagStartIndex:n.closingTagStartIndex,closingTagEndIndex:n.closingTagEndIndex},p={openingTag:a.openingTag,openingTagStartIndex:t.openingTagStartIndex,openingTagEndIndex:t.openingTagEndIndex,closingTag:a.closingTag,closingTagStartIndex:t.closingTagStartIndex,closingTagEndIndex:t.closingTagEndIndex};this.logger.warn([e+`
First hook: `,l,`
Second hook:`,p],o)}removeTagArtifacts(e,t,n,i,o,s){let a=!1,l=!1,p=e.lastIndexOf(t),d=e.lastIndexOf(n);(p>=0&&d===-1||p>d)&&(a=!0);let u=i.indexOf(o),h=i.indexOf(s);return(u>=0&&h===-1||u<h)&&(l=!0),a&&l&&(e=e.substring(0,p)+" ".repeat(t.length)+e.substring(p+t.length),i=i.substring(0,u)+" ".repeat(o.length)+i.substring(u+o.length)),{firstText:e,secondText:i}}convertHTMLEntities(e){let t=this.platformService.createElement("div");return e.replace(/&[#A-Za-z0-9]+;/gi,i=>i==="&nbsp;"?" ":(this.platformService.setInnerContent(t,i),this.platformService.getTextContent(t)))}static{this.\u0275fac=function(t){return new(t||c)(m(_),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),pn=(()=>{class c{constructor(e,t){this.platformService=e,this.logger=t}find(e,t,n,i,o,s){let a=[];for(let l of n)if(typeof l.findHookElements=="function")for(let p of l.findHookElements(e,t,o))a.push({parser:l,hookElement:p});a=Kt(a,this.platformService.sortElements.bind(this.platformService),l=>l.hookElement),a=this.validateHookElements(a,e,o);for(let l of a){let p=Object.keys(s).length+1;s[p]={id:p,parser:l.parser,value:{openingTag:this.platformService.getOpeningTag(l.hookElement),closingTag:this.platformService.getClosingTag(l.hookElement),element:l.hookElement,elementSnapshot:this.platformService.cloneElement(l.hookElement)},data:null,isLazy:!1,bindings:null,previousBindings:null,componentRef:null,dirtyInputs:new Set,outputSubscriptions:{},htmlEventSubscriptions:{}},this.platformService.setAttribute(l.hookElement,I,p.toString()),this.platformService.setAttribute(l.hookElement,E,i)}return s}validateHookElements(e,t,n){let i=[];for(let[o,s]of e.entries()){if(i.slice(0,o).findIndex(p=>p.hookElement===s.hookElement)>=0||this.platformService.getAttributeNames(s.hookElement).includes(I)||this.platformService.getAttributeNames(s.hookElement).includes(E)){this.logger.warn(["An element hook tried to use an element that was found by another hook before. There may be multiple parsers looking for the same elements. Ignoring duplicates.",s.hookElement],n);continue}Xt(s.hookElement)||i.push(s)}return i}static{this.\u0275fac=function(t){return new(t||c)(m(_),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),Ee="dynamic-hooks-sanitization-placeholder",un=new RegExp(`</?${Ee}.*?>`,"g"),hn=(()=>{class c{constructor(e){this.platformService=e,this.attrWhitelist=[I,E,"class","href","src"]}sanitize(e,t,n){let i={};for(let l of Object.values(t)){let p=this.platformService.querySelectorAll(e,`[${I}="${l.id}"][${E}="${n}"]`)?.[0];if(p){i[l.id]=p;let d=this.platformService.getParentNode(p),u=this.platformService.getChildNodes(p),h=this.platformService.createElement(Ee);this.platformService.setAttribute(h,I,l.id.toString()),this.platformService.setAttribute(h,E,n),this.platformService.insertBefore(d,h,p),this.platformService.removeChild(d,p);for(let f of u)this.platformService.appendChild(h,f)}}let o=this.platformService.getInnerContent(e);o=this.findAndEncodeTags(o,un);let s=console.warn;console.warn=()=>{};let a=this.platformService.sanitize(o);console.warn=s,a=this.decodeTagString(a),e.innerHTML=a||"";for(let[l,p]of Object.entries(i)){let d=this.platformService.querySelectorAll(e,`${Ee}[${I}="${l}"]`)?.[0];if(d){let u=this.platformService.getParentNode(d),h=this.platformService.getChildNodes(d);this.platformService.insertBefore(u,p,d),this.platformService.removeChild(u,d);for(let f of h)this.platformService.appendChild(p,f);this.sanitizeElementAttrs(p)}}return e}sanitizeElementAttrs(e){let t=this.platformService.getAttributeNames(e),n=this.platformService.createElement("div"),i=this.platformService.createElement("span");this.platformService.appendChild(n,i);for(let a of t){try{this.platformService.setAttribute(i,a,this.platformService.getAttribute(e,a))}catch{}try{a!==I&&a!==E&&this.platformService.removeAttribute(e,a)}catch{}}n.innerHTML=this.platformService.sanitize(this.platformService.getInnerContent(n));let o=this.platformService.querySelectorAll(n,"span")[0],s=this.platformService.getAttributeNames(o);for(let a of s)try{this.platformService.setAttribute(e,a,this.platformService.getAttribute(o,a))}catch{}return e}findAndEncodeTags(e,t){let n=e,i=T(e,t);i.sort((o,s)=>s.index-o.index);for(let o of i){let s=o.index,a=o.index+o[0].length,l=n.substring(0,s),p=this.encodeTagString(n.substring(s,a)),d=n.substring(a);n=l+p+d}return n}encodeTagString(e){return e=e.replace(/</g,"@@@hook-lt@@@"),e=e.replace(/>/g,"@@@hook-gt@@@"),e=e.replace(/"/g,"@@@hook-dq@@@"),e}decodeTagString(e){return e=e.replace(/@@@hook-lt@@@/g,"<"),e=e.replace(/@@@hook-gt@@@/g,">"),e=e.replace(/@@@hook-dq@@@/g,'"'),e}static{this.\u0275fac=function(t){return new(t||c)(m(_))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),dn=(()=>{class c{constructor(e){this.logger=e}isEqual(e,t,n,i=j()){let o=this.detailedStringify(e,n),s=this.detailedStringify(t,n);return o.result===null||s.result===null?(this.logger.warn([`Objects could not be compared by value as one or both of them could not be stringified. Returning false. 
`,"Objects:",e,t],i),!1):o.result===s.result}detailedStringify(e,t){try{let n={count:0},i=this.decycle(e,[],t,n);return{result:JSON.stringify(i,(s,a)=>a===void 0?"undefined":typeof a=="function"||typeof a=="symbol"?a.toString():a),depthReachedCount:n.count}}catch{return{result:null,depthReachedCount:0}}}decycle(e,t=[],n=5,i){if(t.length>n)return i.count++,null;if(!e||typeof e!="object"||e instanceof Date)return e;for(let s of t)if(this.objEqualsProperties(e,s))return null;let o=t.concat([e]);if(Array.isArray(e)){let s=[];for(let a of e)s.push(this.decycle(a,o,n,i));return s}else{let s={};for(let a of Object.keys(e))s[a]=this.decycle(e[a],o,n,i);return s}}objEqualsProperties(e,t){let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let o of n)if(e[o]!==t[o])return!1;return!0}static{this.\u0275fac=function(t){return new(t||c)(m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),ct=(()=>{class c{constructor(e,t){this.deepComparer=e,this.logger=t}refresh(e,t,n,i){for(let[o,s]of Object.entries(e))this.updateBindings(s,t,n);if(i)for(let o of Object.values(e)){if(!o.componentRef)return;typeof o.componentRef.instance.onDynamicChanges=="function"&&o.componentRef.instance.onDynamicChanges({context:t})}}updateBindings(e,t,n){e.componentRef&&(e.bindings=e.parser.getBindings(e.id,e.value,t,n),this.updateComponentWithNewInputs(e,n),this.updateComponentWithNewOutputs(e,t,n),e.previousBindings={inputs:this.savePreviousBindings(e,"inputs",n.compareInputsByValue,n.compareByValueDepth),outputs:this.savePreviousBindings(e,"outputs",n.compareOutputsByValue,n.compareByValueDepth)})}savePreviousBindings(e,t,n,i){let o={};if(e.bindings.hasOwnProperty(t))for(let[s,a]of Object.entries(e.bindings[t]))o[s]={reference:a,stringified:n?this.deepComparer.detailedStringify(a,i):null};return o}updateComponentWithNewInputs(e,t){let n=e.componentRef.instance,i=this.getChangedBindings(e,"inputs",t),o=[],s=F(e.componentRef.componentType);for(let[a,l]of Object.entries(i)){let p=t.ignoreInputAliases?"propName":"templateName",d=s.inputs.find(u=>a===u[p])||s.inputs.find(u=>a.toLowerCase()===u[p].toLowerCase())||s.inputs.find(u=>a.replace(/-/g,"")===u[p])||s.inputs.find(u=>a.replace(/-/g,"").toLowerCase()===u[p].toLowerCase());if(d)o.push({propName:d.propName,templateName:d.templateName,value:l});else if(t.acceptInputsForAnyProperty){let h=Object.getOwnPropertyNames(n).find(f=>a===f)||Object.getOwnPropertyNames(n).find(f=>a.toLowerCase()===f.toLowerCase())||a;if(!["__proto__","prototype","constructor"].includes(h))o.push({propName:h,templateName:null,value:l});else{this.logger.error(['Tried to overwrite a __proto__, prototype or constructor property with input "'+h+'" for hook "'+e.componentRef.componentType.name+'". This is not allowed.'],t);continue}}}for(let{propName:a,templateName:l,value:p}of o)l?e.componentRef?.setInput(l,p):a&&(e.componentRef.instance[a]=p);o.length&&e.componentRef?.changeDetectorRef.detectChanges()}updateComponentWithNewOutputs(e,t,n){let i=e.componentRef.instance,o=this.getChangedBindings(e,"outputs",n),s=[],a=F(e.componentRef.componentType);for(let[l,p]of Object.entries(o)){let d=n.ignoreOutputAliases?"propName":"templateName",u=a.outputs.find(h=>l===h[d])||a.outputs.find(h=>l.toLowerCase()===h[d].toLowerCase())||a.outputs.find(h=>l.replace(/-/g,"")===h[d])||a.outputs.find(h=>l.replace(/-/g,"").toLowerCase()===h[d].toLowerCase());if(u)s.push({propName:u.propName,templateName:u.templateName,value:p});else if(n.acceptOutputsForAnyObservable){let h=Object.getOwnPropertyNames(i).find(f=>i[f]instanceof le&&l===f)||Object.getOwnPropertyNames(i).find(f=>i[f]instanceof le&&l.toLowerCase()===f.toLowerCase());h&&s.push({propName:h,templateName:null,value:p})}}for(let{propName:l,templateName:p,value:d}of s)e.outputSubscriptions[l]&&e.outputSubscriptions[l].unsubscribe(),e.outputSubscriptions[l]=e.componentRef.instance[l].subscribe(u=>{d(u,t)})}getChangedBindings(e,t,n){let i={};if(e.bindings.hasOwnProperty(t))for(let[o,s]of Object.entries(e.bindings[t])){if(!e.previousBindings||!e.previousBindings[t].hasOwnProperty(o)){i[o]=s;continue}if(t==="inputs"?!n.compareInputsByValue:!n.compareOutputsByValue)s!==e.previousBindings[t][o].reference&&(i[o]=s);else{let a=this.deepComparer.detailedStringify(s,n.compareByValueDepth);this.checkDetailedStringifyResultPair(o,e.componentRef.componentType.name,n,e.previousBindings[t][o].stringified,a)?a.result!==e.previousBindings[t][o].stringified.result&&(i[o]=s):s!==e.previousBindings[t][o].reference&&(i[o]=s)}}return i}checkDetailedStringifyResultPair(e,t,n,i,o){return i.result===null&&o.result===null?(this.logger.warn(['Could stringify neither new nor old value for hook binding "'+e+'" for component "'+t+'" to compare by value. Defaulting to comparison by reference instead.'],n),!1):i.result===null?(this.logger.warn(['Could not stringify old value for hook binding "'+e+'" for component "'+t+'" to compare by value. Defaulting to comparison by reference instead.'],n),!1):o.result===null?(this.logger.warn(['Could not stringify new value for hook binding "'+e+'" for component "'+t+'" to compare by value. Defaulting to comparison by reference instead.'],n),!1):(i.depthReachedCount>0&&o.depthReachedCount>0?this.logger.warn(["Maximum compareByValueDepth of "+n.compareByValueDepth+" reached "+o.depthReachedCount+" time(s) for new value and "+i.depthReachedCount+' time(s) for old value while comparing binding "'+e+'" for component "'+t+`.
`,"If this impacts performance, consider simplifying this binding, reducing comparison depth or setting compareInputsByValue/compareOutputsByValue to false."],n):i.depthReachedCount>0?this.logger.warn(["Maximum compareByValueDepth of "+n.compareByValueDepth+" reached "+i.depthReachedCount+' time(s) for old value while comparing binding "'+e+'" for component "'+t+`.
`,"If this impacts performance, consider simplifying this binding, reducing comparison depth or setting compareInputsByValue/compareOutputsByValue to false."],n):o.depthReachedCount>0&&this.logger.warn(["Maximum compareByValueDepth of "+n.compareByValueDepth+" reached "+o.depthReachedCount+' time(s) for new value while comparing binding "'+e+'" for component "'+t+`.
`,"If this impacts performance, consider simplifying this binding, reducing comparison depth or setting compareInputsByValue/compareOutputsByValue to false."],n),!0)}static{this.\u0275fac=function(t){return new(t||c)(m(dn),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),fn=(()=>{class c{constructor(e,t,n,i,o){this.platformId=e,this.appRef=t,this.componentUpdater=n,this.platformService=i,this.logger=o}init(e,t,n,i,o,s,a){let l=new ce(1),p=[],d={};if(Object.keys(t).length===0)return l.next(!0),l;for(let h of this.platformService.querySelectorAll(e,`[${I}][${E}]`)){let f=parseInt(this.platformService.getAttribute(h,I));if(this.platformService.querySelectorAll(e,`[${I}="${f}"][${E}="${n}"]`).length===0){delete t[f];continue}let g=t[f];if(g.data=g.parser.loadComponent(g.id,g.value,i,this.platformService.getChildNodes(h),o),g.isLazy=g.data.component.hasOwnProperty("importPromise")&&g.data.component.hasOwnProperty("importName"),!Z(this.platformId)&&g.isLazy){delete t[f];continue}!g.data.hostElementTag&&Ut.includes(this.platformService.getTagName(h).toLowerCase())&&(g.data.hostElementTag=we),g.data.hostElementTag&&(h=this.useCustomHostElement(h,g.data.hostElementTag),g.value.element=h),this.createContentSlotElements(h,g,n),d[f]=h}let u=Object.keys(d).map(h=>parseInt(h));for(let[h,f]of Object.entries(t))u.includes(parseInt(h))||(this.logger.warn(["Error when trying to load components - The anchor element for the following hook was found initially, but could not be found again for loading the component. Ignoring.",f],o),delete t[h]);for(let[h,f]of Object.entries(d)){let g=t[h];p.push(J(!0).pipe(Ae(()=>this.loadComponentClass(g.data.component))).pipe(je(v=>{let x=this.extractContentSlotElements(f,n);this.createComponent(g,i,f,x,o,v,s,a)})).pipe(Ne(v=>(this.logger.error([v.stack],o),delete t[g.id],J(null)))))}return p.length===0?(l.next(!0),l):(Oe([...p]).pipe(pe()).subscribe(()=>{for(let h of Object.values(t)){let f=[];(typeof h.componentRef.instance.onDynamicMount=="function"||typeof h.componentRef.instance.onDynamicChanges=="function")&&this.findContentChildren(h.componentRef.location.nativeElement,f,t,n),typeof h.componentRef.instance.onDynamicChanges=="function"&&h.componentRef.instance.onDynamicChanges({contentChildren:f}),typeof h.componentRef.instance.onDynamicMount=="function"&&h.componentRef.instance.onDynamicMount({context:i,contentChildren:f})}for(let h of Object.values(d))this.platformService.removeAttribute(h,I),this.platformService.removeAttribute(h,E),this.platformService.removeAttribute(h,"ng-version");l.next(!0)}),l)}useCustomHostElement(e,t){let n=this.platformService.createElement(t);this.platformService.setAttribute(n,I,this.platformService.getAttribute(e,I)),this.platformService.setAttribute(n,E,this.platformService.getAttribute(e,E)),this.platformService.removeAttribute(e,I),this.platformService.removeAttribute(e,E);let i=this.platformService.getChildNodes(e);for(let o of i)this.platformService.appendChild(n,o);return this.platformService.insertBefore(this.platformService.getParentNode(e),n,e),this.platformService.removeChild(this.platformService.getParentNode(e),e),n}createContentSlotElements(e,t,n){let i;t.data.hasOwnProperty("content")&&Array.isArray(t.data.content)?i=t.data.content:i=[this.platformService.getChildNodes(e)],this.platformService.clearChildNodes(e);for(let[o,s]of i.entries())if(s!=null){let a=this.platformService.createElement("dynamic-component-contentslot");this.platformService.setAttribute(a,"slotIndex",o.toString()),this.platformService.setAttribute(a,"parsetoken",n);for(let l of s)this.platformService.appendChild(a,l);this.platformService.appendChild(e,a)}}extractContentSlotElements(e,t){let n=[],i=this.platformService.getChildNodes(e).filter(o=>this.platformService.getTagName(o)==="DYNAMIC-COMPONENT-CONTENTSLOT"&&this.platformService.getAttribute(o,"parsetoken")===t);for(let o of i){let s=this.platformService.getAttribute(o,"slotIndex");n[parseInt(s)]=this.platformService.getChildNodes(o)}return this.platformService.clearChildNodes(e),n}loadComponentClass(e){let t=new ce(1);if(e.hasOwnProperty("prototype"))t.next(e);else if(typeof e=="function")e().then(n=>{t.next(n)});else if(e.hasOwnProperty("importPromise")&&e.hasOwnProperty("importName")){if(e.importPromise instanceof Promise)throw Error('When lazy-loading a component, the "importPromise"-field must contain a function returning the import-promise, but it contained the promise itself.');e.importPromise().then(n=>{let i=e.importName,o=Object.prototype.hasOwnProperty.call(n,i)?n[i]:n.default;t.next(o)})}else throw Error('The "component" property of a returned HookData object must either contain the component class, a function that returns a promise with the component class or an explicit LazyLoadComponentConfig');return t}createComponent(e,t,n,i,o,s,a,l){let p=Le(s,{hostElement:n,environmentInjector:e.data.environmentInjector||a,elementInjector:e.data.injector||l,projectableNodes:i});e.componentRef=p,this.mapOutputsToHTMLEvents(e,o),this.componentUpdater.updateBindings(e,t,o),typeof e.componentRef.instance.onDynamicChanges=="function"&&t!==void 0&&e.componentRef.instance.onDynamicChanges({context:t}),this.appRef.attachView(p.hostView),p.changeDetectorRef.detectChanges()}mapOutputsToHTMLEvents(e,t){let n=F(e.componentRef.componentType);for(let i of n.outputs){let o=t.ignoreOutputAliases?i.propName:i.templateName;e.htmlEventSubscriptions[o]=e.componentRef.instance[i.propName].subscribe(s=>{t.triggerDOMEvents&&this.platformService.dispatchEvent(e.componentRef?.location.nativeElement,o,s)})}}findContentChildren(e,t=[],n,i){let o=this.platformService.getChildNodes(e);o!=null&&o.length>0&&o.forEach((s,a)=>{let l=!1,p=this.platformService.getAttribute(s,E);if(p!==null&&p===i&&this.platformService.getAttribute(s,I)){let u=parseInt(this.platformService.getAttribute(s,I),10);n.hasOwnProperty(u)&&(t.push({componentRef:n[u].componentRef,contentChildren:[],hookValue:n[u].value}),l=!0)}let d=l?t[t.length-1].contentChildren:t;this.findContentChildren(s,d,n,i)})}static{this.\u0275fac=function(t){return new(t||c)(m(he),m(Fe),m(ct),m(_),m(N))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),gn=(()=>{class c{constructor(e,t,n,i,o,s,a,l,p,d,u){this.allSettings=e,this.ancestorSettings=t,this.moduleSettings=n,this.settingsResolver=i,this.textHookFinder=o,this.elementHookFinder=s,this.contentSanitizer=a,this.componentCreator=l,this.platformService=p,this.environmentInjector=d,this.injector=u}parse(e=null,t=null,n=null,i=null,o=null,s=null,a=null,l={},p=null,d=null){let u=p||this.environmentInjector,h=d||this.injector,{parsers:f,options:g}=this.settingsResolver.resolve(h,e,this.allSettings,this.ancestorSettings,this.moduleSettings,t,i,o,s);if(!e)return J({element:a||this.platformService.createElement("div"),hookIndex:l,context:n,usedParsers:f,usedOptions:g,usedInjector:h,usedEnvironmentInjector:u,destroy:()=>this.destroy(l)});let v=Math.random().toString(36).substring(2,12),x=typeof e=="string"?this.platformService.createElement("div"):e;if(this.platformService.setAttribute(x,ae,"1"),typeof e=="string"){let B=this.textHookFinder.find(e,n,f,v,g,l);this.platformService.setInnerContent(x,B.content)}else this.textHookFinder.findInElement(x,n,f,v,g,l);if(l=this.elementHookFinder.find(x,n,f,v,g,l),g?.sanitize&&this.contentSanitizer.sanitize(x,l,v),a&&a!==x){this.platformService.removeAttribute(x,ae),this.platformService.setAttribute(a,ae,"1"),this.platformService.clearChildNodes(a);for(let B of this.platformService.getChildNodes(x))this.platformService.appendChild(a,B);x=a}return this.componentCreator.init(x,l,v,n,g,u,h).pipe(pe()).pipe(Re(B=>(this.platformService.removeAttribute(x,ae),{element:x,hookIndex:l,context:n,usedParsers:f,usedOptions:g,usedInjector:h,usedEnvironmentInjector:u,destroy:()=>this.destroy(l)})))}destroy(e){if(e){for(let t of Object.values(e))t.componentRef&&t.componentRef.destroy();for(let t of Object.values(e)){for(let n of Object.values(t.outputSubscriptions))n&&n.unsubscribe();for(let n of Object.values(t.htmlEventSubscriptions))n&&n.unsubscribe()}}}static{this.\u0275fac=function(t){return new(t||c)(m(qt,8),m(Zt,8),m(Qt,8),m(ln),m(cn),m(pn),m(hn),m(fn),m(_),m(ue),m(ee))}}static{this.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var Qn=(()=>{class c{constructor(e,t,n,i,o,s){this.hostElement=e,this.dynamicHooksService=t,this.componentUpdater=n,this.platformService=i,this.environmentInjector=o,this.injector=s,this.content=null,this.context=null,this.globalParsersBlacklist=null,this.globalParsersWhitelist=null,this.parsers=null,this.options=null,this.componentsLoaded=new te,this.hookIndex={},this.activeOptions=j(),this.activeParsers=[],this.token=Math.random().toString(36).substring(2,12),this.initialized=!1}ngDoCheck(){this.activeOptions.updateOnPushOnly||this.refresh(!1)}ngOnChanges(e){e.hasOwnProperty("content")||e.hasOwnProperty("globalParsersBlacklist")||e.hasOwnProperty("globalParsersWhitelist")||e.hasOwnProperty("parsers")||e.hasOwnProperty("options")?(this.reset(),this.parse(this.content)):e.hasOwnProperty("context")&&this.refresh(!0)}ngAfterViewInit(){}ngAfterViewChecked(){}ngOnDestroy(){this.reset()}reset(){this.dynamicHooksService.destroy(this.hookIndex),this.platformService.setInnerContent(this.hostElement.nativeElement,""),this.hookIndex={},this.activeOptions=j(),this.activeParsers=[],this.initialized=!1}parse(e){this.dynamicHooksService.parse(e,this.parsers,this.context,this.options,this.globalParsersBlacklist,this.globalParsersWhitelist,this.hostElement.nativeElement,this.hookIndex,this.environmentInjector,this.injector).subscribe(t=>{this.activeParsers=t.usedParsers,this.activeOptions=t.usedOptions,this.initialized=!0;let n=Object.values(this.hookIndex).map(i=>({hookId:i.id,hookValue:i.value,hookParser:i.parser,componentRef:i.componentRef}));this.componentsLoaded.emit(n)})}refresh(e){this.initialized&&this.componentUpdater.refresh(this.hookIndex,this.context,this.activeOptions,e)}static{this.\u0275fac=function(t){return new(t||c)(P(ne),P(gn),P(ct),P(_),P(ue),P(ee))}}static{this.\u0275cmp=Me({type:c,selectors:[["ngx-dynamic-hooks"]],inputs:{content:"content",context:"context",globalParsersBlacklist:"globalParsersBlacklist",globalParsersWhitelist:"globalParsersWhitelist",parsers:"parsers",options:"options"},outputs:{componentsLoaded:"componentsLoaded"},features:[De],decls:0,vars:0,template:function(t,n){},encapsulation:2})}}return c})();var Xn=[{component:{importPromise:()=>import("./chunk-2YPB6F44.js"),importName:"BimViewerComponent"},selector:"bim-viewer"},{component:{importPromise:()=>import("./chunk-ZP3HHCN4.js"),importName:"FileListComponent"},selector:"file-list"},{component:{importPromise:()=>import("./chunk-PVL26EZ6.js"),importName:"MapComponent"},selector:"map"},{component:{importPromise:()=>import("./chunk-4GYN6GKM.js"),importName:"InlineRefComponent"},selector:"ref"},{component:{importPromise:()=>import("./chunk-PUXQCRQ3.js"),importName:"TableSimpleComponent"},selector:"table-simple"}];export{k as a,Qn as b,Xn as c,vn as d};
